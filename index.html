<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover, shrink-to-fit=no, user-scalable=no"/>

    <meta name="robots" content="all">

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(96252267, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/96252267" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

    <!-- Yandex.RTB -->
    <script>window.yaContextCb=window.yaContextCb||[]</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>

    <!-- Заголовок -->
    <Title>Rounded Box — авторский контент</Title>
    <meta name="description" content="Сыграйте в бесплатные игры, посмотрите видео или почитайте интересующие вас статьи."/>
    <!-- Иконка, которая отображается во вкладке -->
    <link rel="shortcut icon" href="./favicon.ico">
    <link rel="icon" href="./favicon.ico">

    <!-- Отображается тогда, когда скидывают ссылку в соц сетях -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://roundedbox.ru/" />

    <style>
        html {
            /* Добавляем видимый скролл */
            overflow-y: scroll;
        }
        html, body {
            /* Красим */
            background-color: #edeef0;
            background-attachment: fixed;
            height: 100%;
            background-image: linear-gradient(#edeef0, #edeef0);

            /* Убираем отступы */
            padding: 0;
            margin: 0;

            /* Делаем прокрутку страницы плавнее */
            scroll-behavior: smooth;
        }
        /* Настраиваем весь текст на странице */
        p {
            /* Указываем шрифт */
            font-family: Arial, Helvetica, sans-serif;

            /* Если текст не вмещается, переносим по буквам */
            word-wrap: break-word;

            /* Указываем цвет */
            color: black;

            font-size: 16px;

            text-align: left;

            /* Отступы */
            margin: auto;
            padding-top: 20px;
            padding-bottom: 20px;
            padding-left: 20px;
            padding-right: 20px;
        }
        /* Настраиваем все картинки на странице */
        img {
            /* Если картинка прозрачная, то фоном послужит цвет */
            background-color: #edeef0;

            max-width: 100%;
            max-height: 100%;

            aspect-ratio: 9/4.5;

            /* Убираем выделение */
            user-select: none;
            -ms-user-select: none;
            -moz-user-select: none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }
        .imgHolder {
            /* Добавляем отступы */
            display: block;
            aspect-ratio: 9/4.5;
            border-radius: 2.5% / 5%;
            margin: 1% 0 1% 0;
            background-color: #edeef0;
            overflow: hidden;
            display: flex;
            /*align-items: center;*/
            justify-content: center;
        }
        .code {
            background: #edeef0;
            font-family: monospace;
            font-size: 15px;
        }
        h3 {
            margin-bottom: 1%;
        }
        .button {
            background-color: white;
        }
        .button:hover {
            background-color: #e3e3e3;
        }
        .view {
            position: absolute; max-width: 770px; margin: auto; left: 0; right: 0;
        }
        .sidebar {
            position: fixed; max-width: 1315px; margin: auto; left: 0; right: 0; top: 0; text-align: center; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none;
        }
        .bottombar {
            position: fixed; max-width: 770px; margin: auto; left: 0; right: 0; bottom: 0; z-index: 1; background-color: white; text-align: center;  border-radius: 10px 10px 0 0; border-top: 2px solid #e3e3e3; border-left: 2px solid #e3e3e3; border-right: 2px solid #e3e3e3; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none;
        }
        @media (max-width: 1315px), (max-height: 365px) {
            .sidebar {
                display: none;
            }
            .bottombar {
                display: block;
            }
        }
        @media (min-width: 1315px) and (min-height: 365px) {
            .bottombar {
                display: none;
            }
            .sidebar {
                display: block;
            }
        }
    </style>

</head>
<body>
<!-- Функционал сайта -->
<script>
    // Проверяем поддержку lazy load
    function checkLazyLoad() {
        (async () => {
            if('loading' in HTMLImageElement.prototype) {
                const images = document.querySelectorAll("img.lazyload");
                images.forEach(img => {
                    img.src = img.dataset.src;
                });
            } else {
                // Технология lazy load не поддерживается
                console.log("Lazy Load не поддерживается.");
            }
        })();
    }

    // Создание поста
    function createPost(backgroundColor, textColor, maxWidth, text, action) {
        let div = document.createElement('p');
        div.style = "background-color:" + backgroundColor + "; color:" + textColor + "; max-width: " + maxWidth + "px; margin-bottom: 15px; -webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); border-radius: 10px; margin-top: 15px;";
        div.innerHTML = text;
        div.className = "created";
        document.querySelector('.view').append(div);

        if(action !== undefined) {
            if(action !== 0) {
                div.onclick = function() {
                    make(action);
                }
                div.style.userSelect = "none";
                div.style.cursor = "pointer";
            }
        }
    }

    // Очистка всех постов
    function clear() {
        document.querySelectorAll(".created").forEach(el => el.remove());
    }
</script>

<div id="container">

    <!-- Весь контент посередине -->
    <div class="view"></div>

    <div class="sidebar">
        <!-- Слева кнопки -->
        <p class="button" onclick='make(0)' style="position: absolute; width: 100%; max-width: 220px; max-height: 20px; overflow: hidden; margin: auto; left: 0; top: 15px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">Главное</p>
        <p class="button" onclick='make(1)' style="position: absolute; width: 100%; max-width: 220px; max-height: 20px; overflow: hidden; margin: auto; left: 0; top: 85px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">Игры</p>
        <p class="button" onclick='make(2)' style="position: absolute; width: 100%; max-width: 220px; max-height: 20px; overflow: hidden; margin: auto; left: 0; top: 155px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">Видео</p>
        <p class="button" onclick='make(3)' style="position: absolute; width: 100%; max-width: 220px; max-height: 20px; overflow: hidden; margin: auto; left: 0; top: 225px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">Статьи</p>
        <a href="https://boosty.to/mslvzn" target="_blank"><p class="button" style="position: absolute; width: 100%; max-width: 94px; max-height: 20px; overflow: hidden; margin: auto; left: 0; top: 295px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">Поддержать</p></a>
        <a href="https://vk.com/roundedbox" target="_blank"><p class="button" style="position: absolute; width: 100%; max-width: 25px; max-height: 20px; overflow: hidden; margin: auto; left: 142px; top: 295px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); padding-left: 15px; padding-right: 15px; text-align: center;">ВК</p></a>
        <a href="https://t.me/roundedbox" target="_blank"><p class="button" style="position: absolute; width: 100%; max-width: 25px; max-height: 20px; overflow: hidden; margin: auto; left: 205px; top: 295px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); padding-left: 15px; padding-right: 15px; text-align: center;">ТГ</p></a>

        <div style="position: absolute; background-color: white; width: 100%; max-width: 260px; max-height: 350px; margin: auto; left: 0; top: 365px; border-radius: 10px; overflow: hidden; -webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">
            <!-- Yandex.RTB R-A-5961865-3 -->
            <div id="yandex_rtb_R-A-5961865-3"></div>
            <script>
                window.yaContextCb.push(()=>{
                    Ya.Context.AdvManager.render({
                        "blockId": "R-A-5961865-3",
                        "renderTo": "yandex_rtb_R-A-5961865-3"
                    })
                })
            </script>
        </div>


        <!-- Справа кнопки -->
        <p class="button" onclick='document.addEventListener("DOMContentLoaded", () => {window.scrollTo(0, 0);});window.scrollTo(0, 0);' style="position: absolute; width: 100%; max-width: 20px; max-height: 20px; overflow: hidden; margin: auto; right: 200px; top: 15px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);text-align: center;">▲</p>
        <p class="button" onclick='const scrollingElement = (document.scrollingElement || document.body); scrollingElement.scrollTop = scrollingElement.scrollHeight;' style="position: absolute; width: 100%; max-width: 20px; max-height: 20px; overflow: hidden; margin: auto; right: 200px; top: 85px; cursor: pointer; border-radius: 10px;-webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); text-align: center;">▼</p>

        <div style="position: absolute; background-color: white; width: 100%; max-width: 240px; max-height: 420px; margin: auto; right: 20px; top: 155px; border-radius: 10px; overflow: hidden; -webkit-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); -moz-box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2); box-shadow: 0px 0px 8px -4px rgba(34, 60, 80, 0.2);">
            <!-- Yandex.RTB R-A-5961865-4 -->
            <div id="yandex_rtb_R-A-5961865-4"></div>
            <script>
                window.yaContextCb.push(()=>{
                    Ya.Context.AdvManager.render({
                        "blockId": "R-A-5961865-4",
                        "renderTo": "yandex_rtb_R-A-5961865-4"
                    })
                })
            </script>
        </div>

    </div>

    <!-- Кнопки на телефоне -->
    <div class="bottombar">
        <p class="button" onclick='make(0)' style="display: inline-block; max-width: 70px; height: auto; margin: auto; bottom: 0; cursor: pointer; padding-left: 5px; padding-right: 5px;">Главное</p>
        <p class="button" onclick='make(1)' style="display: inline-block; max-width: 60px; height: auto; margin: auto; bottom: 0; cursor: pointer; padding-left: 5px; padding-right: 5px;">Игры</p>
        <p class="button" onclick='make(2)' style="display: inline-block; max-width: 60px; height: auto; margin: auto; bottom: 0; cursor: pointer; padding-left: 5px; padding-right: 5px;">Видео</p>
        <p class="button" onclick='make(3)' style="display: inline-block; max-width: 60px; height: auto; margin: auto; bottom: 0; cursor: pointer; padding-left: 5px; padding-right: 5px;">Статьи</p>
        <p class="button" onclick='document.addEventListener("DOMContentLoaded", () => {window.scrollTo(0, 0);});window.scrollTo(0, 0);' style="display: inline-block; max-width: 60px; height: auto; margin: auto; bottom: 0; cursor: pointer; padding-left: 5px; padding-right: 5px;">▲</p>
        <p class="button" onclick='const scrollingElement = (document.scrollingElement || document.body); scrollingElement.scrollTop = scrollingElement.scrollHeight;' style="display: inline-block; max-width: 60px; height: auto; margin: auto; bottom: 0; cursor: pointer; padding-left: 5px; padding-right: 5px;">▼</p>
    </div>
</div>

<script>
    function make(action) {
        clear();

        if(action == 0) {
            window.location.href = "#home";
            document.addEventListener("DOMContentLoaded", () => {
                window.scrollTo(0, 0);
            });
            window.scrollTo(0, 0);

            createPost("white", "black", 750, '<a style="font-size: 150%;"><strong>Добро пожаловать на Rounded Box!</a></strong><br>На нашем сайте вы можете: cыграть в бесплатные <a style="color: #0b57d0; text-decoration: underline; cursor: pointer;" onclick="make(1);">игры</a>, посмотреть <a style="color: #0b57d0; text-decoration: underline; cursor: pointer;" onclick="make(2);">видео</a> или почитать <a style="color: #0b57d0; text-decoration: underline; cursor: pointer;" onclick="make(3);">статьи</a>.<br><br>Наши контакты:<br>Почта: support@roundedbox.ru<br>Группа в телеграме: <a href="https://t.me/roundedbox" target="_blank">t.me/roundedbox</a><br>Группа во вконтакте: <a href="https://vk.com/roundedbox" target="_blank">vk.com/roundedbox</a>', 0);
        } else if(action == 1) {
            window.location.href = "#games";
            document.addEventListener("DOMContentLoaded", () => {
                window.scrollTo(0, 0);
            });
            window.scrollTo(0, 0);

            createPost("white", "black", 750, 'Похоже, что здесь проводятся технические работы. Возвращайтесь позже.', 0);

            // createPost("white", "black", 750, 'Тестовая игра на Unity: <div class="imgHolder"><iframe style="max-width: 100%; max-height: 100%; aspect-ratio: 9/4.5; border: 0;" src="./Files/Games/unity_test/index.html"></iframe></div><a href="./Files/Games/unity_test/index.html" target="_blank">Открыть игру на весь экран в новом окне.</a>', 0);
        } else if(action == 2) {
            window.location.href = "#videos";
            document.addEventListener("DOMContentLoaded", () => {
                window.scrollTo(0, 0);
            });
            window.scrollTo(0, 0);

            createPost("white", "black", 750, 'Похоже, что здесь проводятся технические работы. Возвращайтесь позже.', 0);

            // createPost("white", "black", 750, 'Тестовое видео Nobice: <div class="imgHolder"><video style="max-width: 100%; max-height: 100%; aspect-ratio: 9/4.5;" controls src="./Files/Videos/nobice_test/nobice_text.mp4" controlslist="nodownload">Похоже, что появились неполадки. Попробуйте сменить или обновить браузер.</video></div>', 0);
        } else if(action == 3) {
            window.location.href = "#articles";
            document.addEventListener("DOMContentLoaded", () => {
                window.scrollTo(0, 0);
            });
            window.scrollTo(0, 0);

            createPost("white", "black", 750, '<a href="#articles">#статьи</a>', 0);

            createPost("white", "black", 750, '<a style="font-size: 150%;"><strong>Advanced Templates - расширенные шаблоны для Unity WebGL</a></strong><br>Позволяют зафиксировать экран с игрой в любом разрешений, исправляют большинство багов, дают возможность кастомизировать загрузочный экран и многое другое.<br><div class="imgHolder"><img style="pointer-events: none;" src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_four.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_four.jpg" loading="lazy" class="lazyload"></img></div>', 3.2);

            createPost("white", "black", 750, '<a style="font-size: 150%;"><strong>100 и 1 проблема Unity в WebGL</a></strong><br>Огромный справочник для новичков и не только.<br><div class="imgHolder"><img style="pointer-events: none;" src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/logo.jpg" loading="lazy" class="lazyload"></a></div>', 3.1);
        } else if(action == 3.1) {
            if(window.location.hash.includes("/")) {
                document.addEventListener("DOMContentLoaded", () => {
                    const element = document.getElementById(window.location.hash.replace(/#/gi, ''));
                    element.scrollIntoView();
                });
            } else {
                window.location.href = "#100_and_1_problem_of_unity_in_webgl";
                document.addEventListener("DOMContentLoaded", () => {
                    window.scrollTo(0, 0);
                });
                window.scrollTo(0, 0);
            }

            createPost("white", "black", 750, '<a style="font-size: 150%;"><strong>100 и 1 проблема Unity в WebGL</a></strong><br>Огромный справочник для новичков и не только.<br><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/logo.jpg" target="_blank"><img src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/logo.jpg" loading="lazy" class="lazyload"></a></div>Содержание:<br><a href="#100_and_1_problem_of_unity_in_webgl/the_first_steps">1. Первые шаги</a><br><a href="#100_and_1_problem_of_unity_in_webgl/registration">1.1. Регистрация</a><br><a href="#100_and_1_problem_of_unity_in_webgl/unity_installation">1.2. Установка Unity</a><br><a href="#100_and_1_problem_of_unity_in_webgl/creating_a_project">1.3. Создание проекта</a><br><a href="#100_and_1_problem_of_unity_in_webgl/setting_up_the_project">1.4. Настройка проекта</a><br><a href="#100_and_1_problem_of_unity_in_webgl/opening_the_game_in_the_browser">1.5. Открываем игру в браузере</a><br><a href="#100_and_1_problem_of_unity_in_webgl/the_game_is_not_building_in_Unity">1.6. Не билдится игра в Unity</a><br><a href="#100_and_1_problem_of_unity_in_webgl/the_game_is_not_loading_or_an_error_occurred_in_the_browser">1.7. Игра не грузится или появилась ошибка в браузере</a><br><a href="#100_and_1_problem_of_unity_in_webgl/answers_to_questions">2. Ответы на вопросы</a><br><a href="#100_and_1_problem_of_unity_in_webgl/opening_the_game_in_fullscreen">2.1. Как сделать так, чтобы игра в браузере открывалась на весь экран?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/lock_aspect_ratio">2.2. Как сделать так, чтобы игра в браузере открывалась в разрешений 9/16 или 16/9?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/webgl_are_not_supported_on_mobile_devices">2.3. Как избавиться от ошибки «WebGL builds are not supported on mobile devices» на телефоне?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/remove_scrolling_and_longtap_on_ios">2.4. Как убрать скролл и лонгтап на IOS?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/track_the_closing_of_a_page_or_browser">2.5. Как отследить закрытие страницы или браузера?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_if_the_game_is_in_focus_or_not">2.6. Как узнать находится ли игра в фокусе или нет?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_the_orientation_of_the_device">2.7. Как узнать ориентацию устройства?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_open_console_on_phone">2.8. Как открыть консоль на телефоне?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_the_device">2.9. Как определить устройство?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_remove_splash_screen_made_with_unity">2.10. Как убрать заставку Made With Unity?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/joystick_handle_does_not_move_on_mobile">2.11. Почему кружочек в центре джойстика не двигается за пальцем на телефоне?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_reduce_the_size_of_the_game">2.12. Как можно уменьшить вес игры?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/pausing_the_game_when_the_browser_or_tab_is_minimized">2.13. Как ставить игру на паузу, когда браузер или вкладка свернуты?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_remove_notifications_or_mute_sounds_when_losing_focus">2.14. Как убрать уведомление с игрой на телефоне или выключать звуки при потери фокуса?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_open_links_correctly">2.15. Как правильно открывать ссылки или почему не открывается ссылка на iOS?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_the_domain">2.16. Как определить домен?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/loading_different_builds_based_on_the_device">2.17. Как грузить разные билды в зависимости от платформы?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_configure_the_canvas">2.18. Как правильно настроить канвас?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/game_freezes_completely_on_the_phone_when_losing_focus">2.19. Игра зависает намертво на телефоне при потери фокуса</a><br><a href="#100_and_1_problem_of_unity_in_webgl/game_is_being_cropped_when_resizing_the_browser">2.20. Обрезается игра при изменений размеров браузера</a><br><a href="#100_and_1_problem_of_unity_in_webgl/prepare_the_game_for_release_on_iOS_or_why_textures_disappear_on_apple_devices">2.21. Как подготовить игру для выпуска на iOS или почему пропадают текстуры на устройствах Apple?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/issues_with_multitouch">2.22. Проблема с мультитачем или почему залипают джойстики на экране?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_fix_a_black_screen_on_phones">2.23. Как исправить черный экран на телефонах?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/troubles_with_saves">2.24. Все беды с сохранениями: PlayerPrefs, LocalStorage.</a><br><a href="#100_and_1_problem_of_unity_in_webgl/fix_keyboard_on_the_phone">2.25. Почему на телефоне не открывается клавиатура?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/exit_from_game_not_working">2.26. Почему не работает выход из игры?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/why_is_the_game_loading_so_long_for_players">2.27. Почему у меня игра грузится быстро, а у других очень медленно?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/does_multiplayer_work_in_the_browser">2.28. Работает ли мультиплеер в браузере?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/how_to_add_vibration_on_phones">2.29. Как добавить вибрацию на телефонах?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/places_to_publish_game">2.30. Где можно опубликовать свою игру?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/sdk_and_third_party_plugins">2.31. Что такое SDK площадок и как мне помогут сторонние плагины?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/publishing_your_game">2.32. Издательство и паблишинг вашей игры</a><br><a href="#100_and_1_problem_of_unity_in_webgl/text_issue">2.33. Почему не отображается текст в браузере?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/send_message_from_unity_to_index">2.34. Передача данных из Unity в index.html</a><br><a href="#100_and_1_problem_of_unity_in_webgl/send_message_from_index_to_unity">2.35. Передача данных из index.html в Unity</a><br><a href="#100_and_1_problem_of_unity_in_webgl/video_issue">2.36. Почему не работает видео в браузере?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/customize_loading_screen">2.37. Как изменить загрузочный экран в браузере?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/game_window_transparent">2.38. Можно ли сделать окно с игрой прозрачным?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/get_the_global_time">2.39. Как получить глобальное время?</a><br><a href="#100_and_1_problem_of_unity_in_webgl/yandex_games">3. Яндекс Игры — SDK, реклама и многое другое</a><br><a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_registration">3.1. Регистрация в Яндекс Консоли</a><br><a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_game_loading">3.2. Загрузка игры</a><br><a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_connect_sdk">3.3. Подключение SDK</a><br><a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_game_loading_after_sdk_initialization">3.4. Загрузка игры после инициализаций SDK</a><br><a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_ads">3.5. Вызов рекламы и коллбэки</a><br><b><a id="100_and_1_problem_of_unity_in_webgl/the_first_steps"><h3>1. Первые шаги</h3></a></b>От регистраций до открытия игры в браузере.<br><b><a id="100_and_1_problem_of_unity_in_webgl/registration"><h3>1.1. Регистрация</h3></a></b>Начнем мы с того, что зайдем на <a href="https://unity.com/ru" target="_blank">официальный сайт движка</a>. Сразу перейдем к регистраций, нажимаем Создать Unity ID.<br><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/one.jpg" loading="lazy" class="lazyload"></a></div>Вводим почту, пароль, никнейм и полное имя. Ставим две галочки о том, что мы соглашаемся с политикой движка. После проходим капчу и нажимаем зеленую кнопку Create a Unity ID.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/two.jpg" loading="lazy" class="lazyload"></a></div>После этого появится сообщение о том, что на почту выслано подтверждение.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/three.jpg" loading="lazy" class="lazyload"></a></div>Заходим на почту и открываем письмо от Unity Technologies. Нажимаем Link to confirm email.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/four.jpg" loading="lazy" class="lazyload"></a></div>Нас перекидывает на страницу с просьбой пройти капчу. Проходим и нажимаем кнопку verify.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/five.jpg" loading="lazy" class="lazyload"></a></div>Наконец, вводим снова нашу почту и пароль.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/six.jpg" loading="lazy" class="lazyload"></a></div>Поздравляем, вы успешно зарегистрировались!<br><b><a id="100_and_1_problem_of_unity_in_webgl/unity_installation"><h3>1.2. Установка Unity</h3></a></b>Переходим на <a href="https://unity.com/download" target="_blank">страницу загрузки</a> и нажимаем синюю кнопку Download for Windows. Если у вас другая операционная система, спуститесь немного ниже по странице.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seven.jpg" loading="lazy" class="lazyload"></a></div>После того, как загрузка завершилась, открываем UnityHubSetup.exe<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eight.jpg" loading="lazy" class="lazyload"></a></div>Тут все по классике. Читаем соглашение, жмем далее, выбираем путь для установки и нажимаем Установить.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/nine.jpg" loading="lazy" class="lazyload"></a></div>В конце установки будет стоять галочка рядом с Запустить Unity Hub, не убирайте ее и жмите Готово. После этого откроется установленное приложение.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/ten.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/ten.jpg" loading="lazy" class="lazyload"></a></div>Жмем синюю кнопку Sign in. У нас браузер автоматом совершил вход. Если у вас этого не произошло и открылось окно с просьбой войти в аккаунт, введите почту и пароль. После этого нам откроется следующий вид.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eleven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eleven.jpg" loading="lazy" class="lazyload"></a></div>Теперь переходим в <a href="https://unity.com/releases/editor/archive" target="_blank">архив версий Unity</a>. Выбираем вкладку 2022. Ищем версию Unity 2022.3.9 и жмем синюю кнопку Unity Hub.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twelve.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twelve.jpg" loading="lazy" class="lazyload"></a></div>Нас перекинет в недавно установленное приложение. Здесь вы можете выбрать модули, которые установятся вместе с движком. Например, можно включить поддержку Android или iOS платформ. Но самое главное, не забудьте выбрать WebGL Build Support. После всего этого нажимаем синюю кнопку Install и ждем установки.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirteen.jpg" loading="lazy" class="lazyload"></a></div>Отлично! Вы установили движок.<br><b><a id="100_and_1_problem_of_unity_in_webgl/creating_a_project"><h3>1.3. Создание проекта</h3></a></b>Нажимаем синюю кнопку New Project.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eleven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eleven.jpg" loading="lazy" class="lazyload"></a></div>В открывшемся окне вы можете выбрать, будет ли проект в 3D или 2D, указать название и путь проекта. Какой рендер будет использоваться и все остальное. Однако, если вы будете делать 3D игру, советуем выбрать второй вариант на скриншоте — 3D Core. Если вы будете делать 2D игру, выбирайте первый вариант — 2D Core. После этого жмем синюю кнопку Create Project.<br><br>Примечание: пишите название проекта только на английском языке и без знаков препинания, включая пробел. По пути к проекту так же не должно быть русских букв.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fourteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fourteen.jpg" loading="lazy" class="lazyload"></a></div>После этого перед нами откроется примерно такой вид.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifteen.jpg" loading="lazy" class="lazyload"></a></div>Отлично! Вы успешно создали проект.<br><b><a id="100_and_1_problem_of_unity_in_webgl/setting_up_the_project"><h3>1.4. Настройка проекта</h3></a></b>Для того, чтобы игра работала и грузилась без ошибок, настроим проект. Наводим мышку на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>В открывшемся окне выбираем платформу WebGL и нажимаем Switch Platform.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventeen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventeen.jpg" loading="lazy" class="lazyload"></a></div>Далее нажимаем на кнопку в левом нижнем углу Player Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" loading="lazy" class="lazyload"></a></div>В открывшемся окне спускаемся чуть ниже и разворачиваем Publishing Settings. Здесь Compression Format ставим на None. А галочку с Decompression Fallback в свою очередь снимаем.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/nineteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/nineteen.jpg" loading="lazy" class="lazyload"></a></div>Отлично! Вы успешно настроили проект.<br><b><a id="100_and_1_problem_of_unity_in_webgl/opening_the_game_in_the_browser"><h3>1.5. Открываем игру в браузере</h3></a></b>Вновь наводим мышку на File и заходим в Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Нажимаем кнопку в правом нижнем углу Build and Run. Теперь выбираем папку, рекомендуем создать новую, к примеру, на рабочем столе. Название папки должно быть на английском, без знаков препинания и пробела.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty.jpg" loading="lazy" class="lazyload"></a></div>Спустя время игра автоматом откроется в браузере.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_one.jpg" loading="lazy" class="lazyload"></a></div>Если вам не нужно постоянно открывать игру в браузере, выбирайте Build, вместо Build and Run.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_two.jpg" loading="lazy" class="lazyload"></a></div>В этом случае, вам придется настроить локальный сервер, к примеру, с помощью приложения <a href="https://youtu.be/jHUt45s8Jws?list=PLxAJaawE-vksJlTcZKibYEmtL4dUqbrSa" target="_blank">XAMPP</a>, либо же грузить архив с игрой на такие сайты, как <a href="https://yandex.ru/dev/games/" target="_blank">Яндекс.Игры</a>, <a href="https://itch.io/docs/creators/html5" target="_blank">itch.io</a> и так далее.<br><b><a id="100_and_1_problem_of_unity_in_webgl/the_game_is_not_building_in_Unity"><h3>1.6. Не билдится игра в Unity</h3></a></b>Для начала подытожим один малоизвестный факт - по пути к проекту или к движку не должно быть русских букв.<br><br>А теперь пройдемся по некоторым известным проблемам:<br><b>Building Library&#92; Bee&#92; artifacts&#92; WebGL&#92; build&#92; debug_WebGL_wasm&#92; build.js failed with output</b>: закройте Unity и удалите папку Library. Она находится в папке проекта.<br><br><b>Library&#92; Bee&#92; artifacts&#92; WebGL&#92; build&#92; debug_WebGL_wasm&#92; build.js: undefined symbol: GerReward (referenced by top-level compiled C/C++ code)</b>: скорее всего, вы скачали несколько файлов для вызова рекламы в своем проекте. Откройте их и поиском по тексту найдите злосчастный GerReward, а после замените букву R на T. Должно получиться GetReward.<br><br><b>Build completed with a result of Failed. Preprocessor error "ReferenceError: НАЗВАНИЕ_ФУНКЦИИ is not defined" occured in file</b>: заполните все поля используемого вами шаблона (File > Build Settings > Player Settings > Resolution and Presentation), к примеру, пропишите везде 1. Как только билд завершится успешно, уберите все единицы.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/five.jpg" loading="lazy" class="lazyload"></a></div><b>Failed running command "C:/Program Files/Unity/Hub/Editor/2020.3.25f1/Editor/Data/PlaybackEngines/WebGLSupport&#92;BuildTools&#92;Emscripten_Win&#92;python&#92;2.7.5.3_64bit&#92;python.exe"</b>: попробуйте сменить версию движка или создать новый проект и перенести игру туда.<br><br><b>Failed running D:&#92;Unity&#92;2018.4.16f1&#92;Editor&#92;Data&#92;il2cpp&#92;build&#92;il2cpp.exe</b>: советуем сделать тоже самое, что и выше.<br><b><a id="100_and_1_problem_of_unity_in_webgl/the_game_is_not_loading_or_an_error_occurred_in_the_browser"><h3>1.7. Игра не грузится или появилась ошибка в браузере</h3></a></b>Для отслеживания ошибок используйте консоль, открыть ее можно на F12 или Ctrl Shift I, после в самом вверху выберите вкладку Console. Всегда помните о ней, она ваша правая рука и левое плечо на протяжений всей разработки. Вы также можете <a href="#100_and_1_problem_of_unity_in_webgl/how_to_open_console_on_phone">открыть консоль на телефоне</a>.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_eight.jpg" loading="lazy" class="lazyload"></a></div>Рассмотрим все возможные ошибки:<br><b>Unable to parse Build/build.framework.js.br или gz</b> — если вы используете сжатие Brotli или Gzip, включите Decompression Fallback в Player Settings (File > Build Settings > Player Settings > Publishing Settings). Если же вы отключили сжатие, то есть поставили none в Compression Format, тогда снимите галочку с Decompression Fallback.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/nineteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/nineteen.jpg" loading="lazy" class="lazyload"></a></div><b>Failed to load resource: the server responded with a status of 404 () %D0%91%D0%B8%D0%BB%D0%B4.loader.js</b> — никогда не делайте билд в папку с русским названием. Создайте новую на английском языке, без пробелов и запятых. В локальном сервере все будет работать, но на Яндекс.Играх, к примеру, нет.<br><br><b>RuntimeError: null function or function signature mismatch</b> — перейдите в Player Settings (File > Build Settings > Player Settings > Publishing Settings) и поставьте Debug Symbols на Embedded, затем сделайте билд. После этого Unity напишет, в каком именно скрипте и в какой функций падает ошибка.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_nine.jpg" loading="lazy" class="lazyload"></a></div><b>both async and sync fetching of the wasm failed</b> — как нам известно, ошибка падает при слабом интернет соединений. Загрузка зависает намертво и игроку остается только перезагружать страницу, даже если интернет стал работать лучше.<br><br>Чтобы исправить ошибку, достаточно в index.html добавить строку кода, которая перезапустит загрузку — <a class="code">unityLoader.onload();</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_three.jpg" loading="lazy" class="lazyload"></a></div>Но индекс может отличаться от выбранного шаблона. Потому советуем воспользоваться <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates</a>, где баг исправлен по умолчанию.<br><br><b>null is not an object (evaluating "GL.shaders[id].shaderType=shaderType&1?"vs":"fs"")</b> — Обновите версию iOS.<br><b><a id="100_and_1_problem_of_unity_in_webgl/answers_to_questions"><h3>2. Ответы на вопросы</h3></a></b>Ниже мы собрали вопросы, с которыми вы, скорее всего, хоть раз сталкивались. Если вы можете как-либо дополнить статью, напишите нам в нашей группе в <a href="https://t.me/roundedbox" target="_blank">телеграме</a> или во <a href="https://vk.com/roundedbox" target="_blank">вконтакте</a>.<br><b><a id="100_and_1_problem_of_unity_in_webgl/opening_the_game_in_fullscreen"><h3>2.1. Как сделать так, чтобы игра в браузере открывалась на весь экран?</h3></a></b>Если в браузере игра открывается в таком виде:<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_one.jpg" loading="lazy" class="lazyload"></a></div>Тогда открываем Unity, наводим мышкой на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Далее нажимаем на кнопку в левом нижнем углу Player Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" loading="lazy" class="lazyload"></a></div>Разворачиваем Resolution and Presentation и выбираем третий вариант — PWA. Если такого выбора у вас нет, воспользуйтесь нашими шаблонами <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates</a>.<br><br>Примечание: Default, Minimal и PWA — это шаблоны. Они отвечают за отображение игры в браузере, к примеру, чтобы игра открывалась на весь экран или <a href="#100_and_1_problem_of_unity_in_webgl/lock_aspect_ratio">в разрешений 9/16, 16/9 и т.д.</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_three.jpg" loading="lazy" class="lazyload"></a></div>Отлично! Вы успешно открыли игру на весь экран.<br><b><a id="100_and_1_problem_of_unity_in_webgl/lock_aspect_ratio"><h3>2.2. Как сделать так, чтобы игра в браузере открывалась в разрешений 9/16 или 16/9?</h3></a></b>Воспользуйтесь <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates - расширенными шаблонами для Unity WebGL</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_four.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/webgl_are_not_supported_on_mobile_devices"><h3>2.3. Как избавиться от ошибки «WebGL builds are not supported on mobile devices» на телефоне?</h3></a></b>Открыв игру на телефоне, вы можете заметить следующую проблему.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_five.jpg" loading="lazy" class="lazyload"></a></div>Но сразу отметим, что это скорее даже не ошибка, а обычное предупреждение, оно не влияет на запуск игры. В любом случае желательно избавиться от этой таблички. Для этого откройте index.html в папке с билдом, найдите строку с этим сообщением и удалите ее.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_six.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/remove_scrolling_and_longtap_on_ios"><h3>2.4. Как убрать скролл и лонгтап на IOS?</h3></a></b>Для этого добавьте следующий код в index.html:<br><a class="code" style="display: block;">&#60;style&#62;<br>&#160&#160body&#160{<br>&#160&#160&#160&#160/*&#160Отключаем скролл&#160*/<br>&#160&#160&#160&#160overflow:&#160hidden;<br>&#160&#160&#160&#160/*&#160Отключаем лонгтап на IOS&#160*/<br>&#160&#160&#160&#160-webkit-touch-callout:none;<br>&#160&#160&#160&#160-webkit-user-select:none;<br>&#160&#160&#160&#160-khtml-user-select:none;<br>&#160&#160&#160&#160-moz-user-select:none;<br>&#160&#160&#160&#160-ms-user-select:none;<br>&#160&#160&#160&#160user-select:none;<br>&#160&#160&#160&#160-webkit-tap-highlight-color:rgba(0,0,0,0);<br>&#160&#160}<br>&#60;/style&#62;</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_seven.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/track_the_closing_of_a_page_or_browser"><h3>2.5. Как отследить закрытие страницы или браузера?</h3></a></b>В действительности, такое можно отследить, но способ неидеальный и срабатывает не стопроцентно. Поэтому, если вам нужно реализовать сохранения или что-то подобное, используйте таймер или <a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_if_the_game_is_in_focus_or_not">проверяйте фокус игры</a>.<br><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_determine_if_the_game_is_in_focus_or_not"><h3>2.6. Как узнать находится ли игра в фокусе или нет?</h3></a></b>Воспользуйтесь <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates - расширенными шаблонами для Unity WebGL</a>.<br><br>Но если вы сторонник ассетов, взгляните на <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnApplicationFocus.html" target="_blank">OnApplicationFocus</a>. Пример использования:<a class="code" style="display: block;">using UnityEngine;<br><br>public class AppFocus : MonoBehaviour {<br>&#160&#160void OnApplicationFocus(bool hasFocus) {<br>&#160&#160&#160&#160CheckFocus(!hasFocus);<br>&#160&#160}<br><br>&#160&#160void OnApplicationPause(bool pauseStatus) {<br>&#160&#160&#160&#160CheckFocus(pauseStatus);<br>&#160&#160}<br><br>&#160&#160private void CheckFocus(bool isPaused) {<br>&#160&#160&#160&#160if(isPaused) {<br>&#160&#160&#160&#160&#160&#160Debug.Log("Игра НЕ в фокусе");<br>&#160&#160&#160&#160} else {<br>&#160&#160&#160&#160&#160&#160Debug.Log("Игра в фокусе");<br>&#160&#160&#160&#160}<br>&#160&#160}<br>}</a><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_determine_the_orientation_of_the_device"><h3>2.7. Как узнать ориентацию устройства?</h3></a></b>Вновь советуем воспользоваться <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates - расширенными шаблонами для Unity WebGL</a>.<br><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_open_console_on_phone"><h3>2.8. Как открыть консоль на телефоне?</h3></a></b>Загуглите или введите в Google Play - браузер с консолью разработчика. Выберите подходящий вариант, некоторые кандидаты: Kiwi Browser, Eruda, Vivaldi.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty.jpg" loading="lazy" class="lazyload"></a></div>Если скачать никак не получится, воспользуйтесь инструкцией, расположенной <a href="https://blog.dubkov.org/qa/dev/how-to-connect-android-device-to-chrome/" target="_blank">здесь</a>. Вам придется открыть игру в Chrome с мобильного устройства, подключиться с помощью usb к компьютеру и разрешить отладку. Как только в списке появится ваша игра, нажимайте inspect.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_one.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_determine_the_device"><h3>2.9. Как определить устройство?</h3></a></b><b>Способ первый</b>: рассмотрим для начала реализацию от Unity, а именно <a href="https://docs.unity3d.com/ScriptReference/Application-isMobilePlatform.html" target="_blank">Application.isMobilePlatform</a>:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class DeviceType : MonoBehaviour {<br>&nbsp;&nbsp;private void Awake() {<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Application.isMobilePlatform) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на телефоне");<br>&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на ПК");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br></a>Но есть минус, iPad на Safari будет считываться как компьютер. Однако метод схож с определением SDK Яндекс.Игр, а потому проблем с модерацией не возникнет. Советуем использовать именно этот вариант.<br><br><b>Способ второй</b>: чтобы iPad засчитывался как телефон, мы можем определять устройство по поддержке тача. Но и здесь есть прокол, ноутбуки и компьютеры с той же поддержкой тоже будут считываться как мобильное устройство.<br><br>Однако, если вас это ничуть не пугает, скачайте следующий ассет: <a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/RBDeviceType.unitypackage" download>RBDeviceType.unitypackage</a>. Как только вы импортируете его в проект, у вас появится папка RBDeviceType, а внутри скрипт и файл с расширением jslib. Вы можете повесить скрипт RBDeviceType на сцену и добавить необходимые данные в нем.<br><br>Либо, если вам нужно в другом скрипте проверять устройство, скрипт RBDeviceType на сцену добавлять не нужно. А проверку сделать таким образом:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class AnotherScript : MonoBehaviour {<br>&nbsp;&nbsp;void Awake() {<br>&nbsp;&nbsp;&nbsp;&nbsp;if(RBDeviceType.isMobile()) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на телефоне");<br>&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на ПК");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_remove_splash_screen_made_with_unity"><h3>2.10. Как убрать заставку Made With Unity?</h3></a></b>Воспользуйтесь скриптом с <a href="https://github.com/Jadekylin/UnitySkipSplash" target="_blank">гитхаба Jadekylin.</a> Скрипт на сцену добавлять не нужно, пусть просто лежит в проекте.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_two.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/joystick_handle_does_not_move_on_mobile"><h3>2.11. Почему кружочек в центре джойстика не двигается за пальцем на телефоне?</h3></a></b>Проблема может быть в том, что вы лочите курсор. На телефонах этого делать не стоит, поэтому добавьте определение устройства:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class JustAnotherScript : MonoBehaviour {<br>&nbsp;&nbsp;private void Awake() {<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!Application.isMobilePlatform) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor.lockState = CursorLockMode.Locked;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor.visible = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_reduce_the_size_of_the_game"><h3>2.12. Как можно уменьшить вес игры?</h3></a></b>Для начала давайте узнаем, что больше всего занимает место в проекте. Наводим мышку на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Здесь нажимаем на стрелку на кнопке Build и жмем Clean Build.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_three.jpg" loading="lazy" class="lazyload"></a></div>Дождавшись окончания билда, переходим в Console и выбираем Editor Log.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_four.jpg" loading="lazy" class="lazyload"></a></div>Теперь нажимаем Ctrl F и вводим Build Report, чтобы поиском по тексту найти то же самое место, что и на скриншоте.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_five.jpg" loading="lazy" class="lazyload"></a></div>Как мы можем заметить, целых два мегабайта занимает Splash Screen Unity Logo. Но спешим вас огорчить, в самом билде он занимает лишь пару килобайт, что удалось выяснить в <a href="https://forum.unity.com/threads/the-texture-of-the-splash-screen-logo-in-the-build.1427613/#post-9106408" target="_blank">официальном форуме Unity</a>.<br><br> Приступим, наконец, к оптимизаций веса.<br><b> Шрифты:</b> мы можем убрать лишние и неиспользуемые символы с помощью этого <a href="https://transfonter.org/" target="_blank">сайта</a>. Введите все необходимые буквы в поле Characters.<a class="code" style="display: block;">- Английский алфавит.<br>Строчные буквы: abcdefghijklmnopqrstuvwxyz<br>Прописные буквы: ABCDEFGHIJKLMNOPQRSTUVWXYZ<br>- Русский алфавит.<br>Строчные буквы: абвгдеёжзийклмнопрстуфхцчшщъыьэюя<br>Прописные буквы: АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ<br>- Пробел.<br>Не забудьте про пробел.<br>- Цифры.<br>0123456789<br>- Символы.<br>.,!?"()+-<br>- Все вместе.<br>АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдеёжзийклмнопрстуфхцчшщъыьэюяABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,!?"()+-</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_six.jpg" loading="lazy" class="lazyload"></a></div><b>Настройка проекта:</b> наводим мышку на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Рассмотрим в первую очередь параметр Code Optimization.<br>• Shorter Build Time - проект будет билдиться быстрее.<br>• Runtime Speed - ставка будет на оптимизацию.<br>• Disk Size - проект будет весить меньше, но незначительно пострадает оптимизация.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_seven.jpg" loading="lazy" class="lazyload"></a></div>Идем дальше. Жмем кнопку в левом нижнем углу Player Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" loading="lazy" class="lazyload"></a></div>Разворачиваем Other Settings и обращаем внимание на параметр IL2CPP Code Generation.<br>• Faster Runtime - упор будет на оптимизацию.<br>• Faster (smaller) builds - билд уменьшится в размере, но пострадает производительность.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_eight.jpg" loading="lazy" class="lazyload"></a></div>Спускаемся ниже и ставим галочку в Strip Engine Code. В параметре Managed Stripping Level выбираем один из четырех вариантов: Minimal, Low, Medium, High. Чем выше вариант вы выберите, тем сильнее будут урезаться скрипты. Это здорово уменьшит вес игры, однако, есть шанс того, что обрежется важный код.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/thirty_nine.jpg" loading="lazy" class="lazyload"></a></div>Теперь разворачиваем Publishing Settings. Если у вас часто падают ошибки или вы используете сторонние ассеты и плагины, то есть не ручаетесь за их работу, то лучше оставьте параметр Enable Exceptions в первоначальном виде. Иначе это может привести к крашу игры. Если же вы уверены в своем проекте, выбирайте None, чтобы улучшить производительность и уменьшить вес игры.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty.jpg" loading="lazy" class="lazyload"></a></div><b>Библиотеки:</b> согласитесь, если вы делаете игру викторину, то физика вам явно не понадобится. А потому мы можем смело удалить ее, заодно сэкономить примерно мегабайт. Для начала наводим мышку на Window и жмем на Package Manager.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_one.jpg" loading="lazy" class="lazyload"></a></div>В открывшемся окне выбираем Built In и ориентируясь по названиям и описанию, удаляем ненужные библиотеки.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_two.jpg" loading="lazy" class="lazyload"></a></div>Но не забывайте про их зависимости. Библиотека не удалится, пока вы не уберете ее соседей. Взглянуть зависимости можно нажав на Dependencies.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_three.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/pausing_the_game_when_the_browser_or_tab_is_minimized"><h3>2.13. Как ставить игру на паузу, когда браузер или вкладка свернуты?</h3></a></b>Для начала наводим мышку на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Жмем кнопку в левом нижнем углу Player Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" loading="lazy" class="lazyload"></a></div>Разворачиваем Resolution and Presentation и снимаем галочку с Run in Background.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_four.jpg" loading="lazy" class="lazyload"></a></div>Благодаря этому, при потери фокуса игра будет ставиться на паузу. Вы также можете самостоятельно <a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_if_the_game_is_in_focus_or_not">отслеживать потерю фокуса</a>, но перед этим поставьте галочку в Run in Background обратно.<br><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_remove_notifications_or_mute_sounds_when_losing_focus"><h3>2.14. Как убрать уведомление с игрой на телефоне или выключать звуки при потери фокуса?</h3></a></b>У звуков обязательно Load Type должен стоять на Decompress on Load.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_five.jpg" loading="lazy" class="lazyload"></a></div>Вдобавок, попробуйте также следующие варианты:<tagname style="margin-left: 2%; display: block;">• <a href="#100_and_1_problem_of_unity_in_webgl/pausing_the_game_when_the_browser_or_tab_is_minimized">Отключите Run in Background</a>.<br>• <a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_if_the_game_is_in_focus_or_not">Отслеживайте потерю фокуса</a> и выключайте звуки самостоятельно.</tagname><br>Но если вы пользуетесь какими-либо плагинами, то может получиться такая картина, что сразу несколько скриптов будут пытаться включать и отключать звуки, то есть как-либо играть с фокусом игры. В таком случае, советуем воспользоваться <a href="https://glow-yogurt-701.notion.site/Unity-Audio-Plugin-3-0-a9b3103e77d14f56b39e1b35792e7f4a" target="_blank">Web Audio Plugin</a>.<br><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_open_links_correctly"><h3>2.15. Как правильно открывать ссылки или почему не открывается ссылка на iOS?</h3></a></b>У Unity есть стандартный метод открытия ссылок, а именно <a href="https://docs.unity3d.com/ScriptReference/Application.OpenURL.html" target="_blank">Application.OpenURL</a>. Но мы не советуем его использовать, а все потому, что на iOS он не работает. Поэтому предлагаем взглянуть на решение ниже.<br><br>Скачайте следующий ассет: <a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/RBOpenURL.unitypackage" download>RBOpenURL.unitypackage</a>. Как только вы импортируете его в проект, у вас появится папка RBOpenURL, а внутри скрипт и файл с расширением jslib. На сцену их добавлять не нужно, пусть просто валяются в проекте. Теперь в своем скрипте вы можете открывать ссылки таким образом:<a class="code" style="display: block">using UnityEngine;<br><br>public class AnotherScript : MonoBehaviour {<br>&nbsp;&nbsp;void Update() {<br>&nbsp;&nbsp;&nbsp;&nbsp;// Если нажали на кнопку F, переходим по ссылке<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetKeyDown(KeyCode.F)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RBOpenURL.OpenURL("https://roundedbox.ru/");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a>Однако, если вы собираетесь выпускать игру на Яндекс.Играх, <a href="#100_and_1_problem_of_unity_in_webgl/how_to_determine_the_domain">учитывайте домены</a>.<br><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_determine_the_domain"><h3>2.16. Как определить домен?</h3></a></b>Чтобы определить, находимся ли мы на .com или .ru, можно написать простенький скрипт:<a class="code" style="display: block;">using UnityEngine;<br><br>public class AnotherScript : MonoBehaviour {<br>&nbsp;&nbsp;void Awake() {<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Application.absoluteURL.Contains(".com")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на .com домене");<br>&nbsp;&nbsp;&nbsp;&nbsp;} else if(Application.absoluteURL.Contains(".ru")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на .ru домене");<br>&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Открыто на неизвестном домене");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a><b><a id="100_and_1_problem_of_unity_in_webgl/loading_different_builds_based_on_the_device"><h3>2.17. Как грузить разные билды в зависимости от платформы?</h3></a></b>Допустим, что вы хотите сделать одну версию игры с плохой графикой, и грузить ее на телефонах, где интернет слабее. А другую версию, с улучшенной графикой, грузить на компьютерах, где интернет, скорее всего, работает лучше.<br><br>Для начала создадим папку и назовем ее Kaban. Делаем первый билд для компьютера туда же и спустя время получаем примерно такую картину.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_six.jpg" loading="lazy" class="lazyload"></a></div>Теперь перемеиновываем папку Build в BuildDesktop.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_seven.jpg" loading="lazy" class="lazyload"></a></div>После этого создаем новую папку и называем ее Kozlov. Делаем билд для телефона туда.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_eight.jpg" loading="lazy" class="lazyload"></a></div>Папку Build перемеиновываем в BuildMobile.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/forty_nine.jpg" loading="lazy" class="lazyload"></a></div>Копируем BuildMobile и перетаскиваем в папку Kaban.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty.jpg" loading="lazy" class="lazyload"></a></div>Папку Kozlov можно удалить. Теперь открываем index.html и отредактируем одну часть.<br><br>Сразу отметим, что одна и та же строка может по-разному выглядеть в зависимости от выбранного шаблона (и плагина, соответственно). Но смысл в ней один, а потому разыскать ее не составит труда.<br><br>Не обращайте внимание на то, что на втором скрине написано Kozlov, вместо Kaban. Техническая недоработка.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_one.jpg" loading="lazy" class="lazyload"></a></div>Добавляем проверку устройства и грузим нужные файлы. Для вашего удобства покажем на двух примерах одновременно.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_two.jpg" loading="lazy" class="lazyload"></a></div>Скопировать код:<a class="code" style="display: block;">var buildUrl;<br>if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {<br>&nbsp;&nbsp;buildUrl = "BuildMobile";<br>} else {<br>&nbsp;&nbsp;buildUrl = "BuildDesktop";<br>}</a><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_configure_the_canvas"><h3>2.18. Как правильно настроить канвас?</h3></a></b>Обязательно укажите разрешение вашей игры и выберите Expand в Screen Match Mode. По нашим наблюдениям, он лучше всего адаптирует интерфейс при разных размеров окна.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_three.jpg" loading="lazy" class="lazyload"></a></div>Если у вас обрезается не интерфейс, то про <a href="#100_and_1_problem_of_unity_in_webgl/game_is_being_cropped_when_resizing_the_browser">настройку камеры мы рассказали здесь</a>.<b><a id="100_and_1_problem_of_unity_in_webgl/game_freezes_completely_on_the_phone_when_losing_focus"><h3>2.19. Игра зависает намертво на телефоне при потери фокуса</h3></a></b>Чаще всего такой баг возникает в мобильном яндекс браузере, починить его довольно просто. Достаточно обновить или сменить версию Unity, к примеру, на следующих версиях такой баг не встречается:<tagname style="margin-left: 2%; display: block;">• 2022.3.9f1<br>• 2022.3.10f1</tagname><b><a id="100_and_1_problem_of_unity_in_webgl/game_is_being_cropped_when_resizing_the_browser"><h3>2.20. Обрезается игра при изменений размеров браузера</h3></a></b>Способов решить это примерно два, а именно:<tagname style="margin-left: 2%; display: block;">• Использовать решение от <a href="https://www.youtube.com/watch?v=0cmxFjP375Y&t=190s" target="_blank">Emerald Powder</a>.<br>• <a href="#100_and_1_problem_of_unity_in_webgl/lock_aspect_ratio">Зафиксировать экран с игрой в любом надобном вам разрешений</a>, будь то 9/16 или 16/9. Но этот вариант подойдет не всем из-за того, что появятся полосы по бокам. Однако, в таком случае, вы можете включать фиксацию только когда окно браузера меньше или больше определенного разрешения.</tagname><br>Если у вас обрезается интерфейс, то про <a href="#100_and_1_problem_of_unity_in_webgl/how_to_configure_the_canvas">настройку канваса мы рассказали здесь</a>.<b><a id="100_and_1_problem_of_unity_in_webgl/prepare_the_game_for_release_on_iOS_or_why_textures_disappear_on_apple_devices"><h3>2.21. Как подготовить игру для выпуска на iOS или почему пропадают текстуры на устройствах Apple?</h3></a></b>При использований URP, вы можете столкнуться с тем, что на iOS некоторые материалы приобретают розовый цвет, либо вовсе не отображаются. Скорее всего, это связано с одним из шейдеров, попробуйте попросту выбрать другой.<br><br>Однако, мы считаем, что самая лучшая последовательность для выпуска на iOS такова:<tagname style="margin-left: 2%; display: block;">• Отказаться от URP и использовать Built In рендер.<br>• Добавить поддержку WebGL1.<br>• Выбрать другую компрессию текстур, например, ETC2.<br>• Снять галочку Enable GPU Instancing у материалов.<br>• Снизить качество текстур и оптимизировать игру.</tagname><b><a id="100_and_1_problem_of_unity_in_webgl/issues_with_multitouch"><h3>2.22. Проблема с мультитачем или почему залипают джойстики на экране?</h3></a></b>Советуем обновить версию Unity. К примеру, начиная с 2022 версий мультитач должен работать исправно.<b><a id="100_and_1_problem_of_unity_in_webgl/how_to_fix_a_black_screen_on_phones"><h3>2.23. Как исправить черный экран на телефонах?</h3></a></b>Для начала стоит взглянуть в консоль на наличие ошибок.<br><tagname style="margin-left: 2%; display: block;">• <a href="#100_and_1_problem_of_unity_in_webgl/the_game_is_not_loading_or_an_error_occurred_in_the_browser">Как открыть консоль на компьютере и решение возможных проблем.</a><br>• <a href="#100_and_1_problem_of_unity_in_webgl/how_to_open_console_on_phone">Как открыть консоль на телефоне.</a><br></tagname><br>Но если проблема с черным экраном возникает только в мобильном Яндекс Браузере, попробуйте сменить Color Space. Для этого наводим мышкой на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Далее нажимаем на кнопку в левом нижнем углу Player Settings.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/eighteen.jpg" loading="lazy" class="lazyload"></a></div>Разворачиваем Other Settings и в параметре Color Space выбираем Gamma.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_four.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/troubles_with_saves"><h3>2.24. Все беды с сохранениями: PlayerPrefs, LocalStorage.</h3></a></b>Сразу предупредим, что в инкогнито сохранения чаще всего не работают, и это нормально. Точно так же сохранения могут сбрасываться на iOS.<br><br>PlayerPrefs прекрасно работают в браузере, поэтому можете смело использовать их. Но есть небольшой минус, при обновлений архива на серверах, к примеру, на Яндекс Играх или itch.io, сохранения сбросятся.<br><br>Для решения проблемы выше, вы можете сохранять в LocalStorage. Для этого отлично подойдет следующий ассет: <a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/PlayerPrefsWrapper.unitypackage" download>PlayerPrefsWrapper.unitypackage</a>. Скрипты были взяты с гитхаба <a href="https://gist.github.com/robertwahler/b3110b3077b72b4c56199668f74978a0" target="_blank">robertwahler</a> и доработаны одним из участников сообщества Яндекс Игр.<br><br>Как только вы импортируете ассет в проект, у вас появится папка PlayerPrefsWrapper, а внутри скрипт и файл с расширением jslib. На сцену их добавлять не нужно, пусть просто валяются в проекте. После этого вы можете продолжать сохранять данные с помощью PlayerPrefs, но необходимо дописывать вначале Social. То есть, это будет выглядеть примерно так:<a class="code" style="display: block">Social.PlayerPrefs.Save();</a><b><a id="100_and_1_problem_of_unity_in_webgl/fix_keyboard_on_the_phone"><h3>2.25. Почему на телефоне не открывается клавиатура?</h3></a></b>Способов решения несколько:<br><tagname style="margin-left: 2%; display: block;">• Смените версию Unity на 2022 и выше, и используйте Legacy Input Field.<br>• Создайте виртуальную клавиатуру на экране.<br>• Попробуйте использовать сторонние решения с <a href="https://github.com/search?q=unity%20webgl%20input&type=repositories" target="_blank">гитхаба</a>. Один из <a href="https://github.com/kou-yeung/WebGLInput?tab=readme-ov-file" target="_blank">кандидатов</a>.</tagname><b><a id="100_and_1_problem_of_unity_in_webgl/exit_from_game_not_working"><h3>2.26. Почему не работает выход из игры?</h3></a></b>Не пытайтесь использовать <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.OnApplicationQuit.html" target="_blank">OnApplicationQuit</a> в браузере. Пользователю не составит труда закрыть вкладку самостоятельно, а потому кнопку выхода из игры делать не нужно.<b><a id="100_and_1_problem_of_unity_in_webgl/why_is_the_game_loading_so_long_for_players"><h3>2.27. Почему у меня игра грузится быстро, а у других очень медленно?</h3></a></b>Скорее всего, у вас просто хороший интернет. А еще файлы игры зачастую кэшируются в браузере после первой загрузки, а потому в следующие разы вы даже не заметите загрузочного экрана. Но после обновления файлы будут перекачиваться заново.<br><br>Чтобы загрузка проходила быстрее, попробуйте <a href="#100_and_1_problem_of_unity_in_webgl/how_to_reduce_the_size_of_the_game">уменьшить вес игры</a>.<b><a id="100_and_1_problem_of_unity_in_webgl/does_multiplayer_work_in_the_browser"><h3>2.28. Работает ли мультиплеер в браузере?</h3></a></b>Если коротко — да, работает, только браузера не могут быть хостами.<br><br>Помимо этого, мультиплеер — это дорогостоящая и сложная операция. Поэтому, если вы не готовы прощаться с парой кровных, к тому же с малым опытом разработки игр и совсем не разбираетесь в работе онлайн игр. Тогда повремените и оставьте это на потом.<br><br>Но если вы уже на полпути к завершению и столкнулись с какой-либо проблемой, задайте вопрос в нашей телеграм <a href="https://t.me/roundedbox" target="_blank">группе</a> в специальной теме <a href="https://t.me/roundedbox/8751" target="_blank">Серверная</a>.<br><br>Имейте ввиду, что на Яндекс Играх хосты блокируются по умолчанию. Если вы пользуетесь Photon, то сначала одобрите хосты в настройках черновика:<a class="code" style="display: block;">exitgames.com<br>photonengine.io</a>Главное, посылайте почти или полностью готовую игру. Если на экране будет чистый белый лист, хосты вам не одобрят.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_five.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/how_to_add_vibration_on_phones"><h3>2.29. Как добавить вибрацию на телефонах?</h3></a></b>Скачайте следующий ассет: <a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/RBVibration.unitypackage" download>RBVibration.unitypackage</a>. Как только вы импортируете его в проект, у вас появится папка RBVibration, а внутри скрипт и файл с расширением jslib. На сцену их добавлять не нужно, пусть просто валяются в проекте. Теперь в своем скрипте вы можете вызывать вибрацию таким образом:<a class="code" style="display: block">using UnityEngine;<br><br>public class AnotherScript : MonoBehaviour {<br>&nbsp;&nbsp;void Update() {<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetButtonDown("Fire1")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RBVibration.isVibrate(100);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a>Обратите внимание, что 100 - это интервал в миллисекундах (мс).<br><br>1000 мс - 1 секунда.<br><br>Перед вызовом вибраций сперва необходимо совершить первое касание по экрану телефона, лишь после этого все будет работать. Не забудьте также выключить беззвучный режим.<b><a id="100_and_1_problem_of_unity_in_webgl/places_to_publish_game"><h3>2.30. Где можно опубликовать свою игру?</h3></a></b>Составили небольшой список:<tagname style="margin-left: 2%; display: block;">• <a href="https://yandex.ru/dev/games/" target="_blank">Яндекс Игры</a><br>• <a href="https://developer.crazygames.com/" target="_blank">Crazy Games</a><br>• <a href="https://developers.poki.com/" target="_blank">Poki</a><br>• <a href="https://vk.com/games" target="_blank">VK Games</a><br>• <a href="https://ok.ru/vitrine" target="_blank">OK Games</a><br>• <a href="https://gamemonetize.com/" target="_blank">GameMonetize</a><br>• <a href="https://gamedistribution.com/" target="_blank">GameDistribution</a><br>• <a href="https://www.kongregate.com/" target="_blank">Kongregate</a><br>• <a href="https://www.gamepix.com/" target="_blank">GamePix</a><br>• <a href="https://www.wgplayground.com/" target="_blank">WGPlayground</a><br>• <a href="https://ag.ru/" target="_blank">Absolute Games</a><br>• <a href="https://www.gamearter.com/" target="_blank">GameArter</a><br>• <a href="https://ru.y8.com/" target="_blank">Y8</a><br>• <a href="https://developers.facebook.com/docs/games/instant-games" target="_blank">Facebook</a><br>• <a href="https://itch.io/docs/creators/html5" target="_blank">itch.io</a></tagname><b><a id="100_and_1_problem_of_unity_in_webgl/sdk_and_third_party_plugins"><h3>2.31. Что такое SDK площадок и как мне помогут сторонние плагины?</h3></a></b>Для выхода на большинстве площадок необходимо встроить их собственный SDK. К примеру, для того, чтобы вы могли вызывать рекламу, сохранять данные игрока в облаке и многое другое.<br><br>Но встраивать SDK каждой площадки утомительно и слишком сложно. Ведь мало того, что необходимо прочесть документацию, так еще и правильно подключить и проверить работу. Чтобы облегчить данный процесс, мы можем воспользоваться сторонними плагинами:<br><tagname style="margin-left: 2%; display: block;">• <a href="https://t.me/yandexgame_plugin" target="_blank">PluginYG</a> — самый известный плагин для Яндекс Игр.<br>• <a href="https://gamepush.com/ru/overview/" target="_blank">GamePush</a> — самый богатый и роскошный плагин. Поддерживает сразу несколько движков и платформ, к примеру: Яндекс Игры, VK Games, OK Games, GameMonetize, GameDistribution, Kongregate, GamePix, WGPlayground и так далее. Вдобавок, содержит в себе: коллекцию игр, достижения, аналитику и многое другое. <br>• <a href="https://getbridge.org/" target="_blank">Instant Games Bridge</a> — младший и скромный брат GamePush. Точно так же поддерживает несколько движков и платформ, к примеру: VK, Яндекс Игры, Crazy Games, Absolute Games, GameDistribution и так далее.</tagname><b><a id="100_and_1_problem_of_unity_in_webgl/publishing_your_game"><h3>2.32. Издательство и паблишинг вашей игры</h3></a></b>Если вы не можете вывести средства с иностранных площадок, либо вам попросту нужна помощь в размещений и получений фичеринга, то воспользуйтесь следующими вариантами:<br><tagname style="margin-left: 2%; display: block;">• <a href="https://gamepush.com/ru/" target="_blank">GamePush</a><br>• <a href="https://html5.center/" target="_blank">HTML5.center</a><br>• <a href="https://mirragames.com/ru/" target="_blank">MirraGames</a></tagname><b><a id="100_and_1_problem_of_unity_in_webgl/text_issue"><h3>2.33. Почему не отображается текст в браузере?</h3></a></b>Вариантов несколько:<br><tagname style="margin-left: 2%; display: block;">• Вы используете стандартный шрифт от Unity. Скачайте новый с поддержкой кириллицы.<br>• Текст слишком большой и не влазит в установленные рамки.<br>• Вы пользуетесь TMP и забыли указать HEX-код: 0400-04ff</tagname><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_six.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/send_message_from_unity_to_index"><h3>2.34. Передача данных из Unity в index.html</h3></a></b>Воспользуемся <a href="https://docs.unity3d.com/ScriptReference/Application.ExternalCall.html" target="_blank">Application.ExternalCall</a>. Метод хоть и считается устаревшим, но все еще работает.<br><br>К примеру, давайте вызовем alert в index.html. Для этого напишем небольшой скрипт:<br><a class="code" style="display: block">using UnityEngine;<br><br>public class FromUnityToIndex : MonoBehaviour {<br>&nbsp;&nbsp;void Start() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Application.ExternalCall("ShowAlert");<br>&nbsp;&nbsp;}<br>}</a>Не пугайтесь предупреждающего сообщения в консоли движка, оно ни на что не влияет, а просто сообщает о том, что метод устаревший.<br><br>Теперь делаем билд и открываем index.html. В теге script добавляем функцию с названием ShowAlert. Если вы пользуетесь <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates</a>, то достаточно код ниже вставить в Custom Event in JS, чтобы не приходилось каждый раз редактировать индекс.<a class="code" style="display: block">function ShowAlert() {<br>&nbsp;&nbsp;alert("Сообщение");<br>}</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_seven.jpg" loading="lazy" class="lazyload"></a></div>Открываем игру в браузере и видим то самое сообщение.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_eight.jpg" loading="lazy" class="lazyload"></a></div>Но, допустим, что мы хотим передать string. То есть, вместо "Сообщение" передадим и покажем свой личный текст. Для этого подредактируем скрипт:<br><a class="code" style="display: block">using UnityEngine;<br><br>public class FromUnityToIndex : MonoBehaviour {<br>&nbsp;&nbsp;void Start() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Application.ExternalCall("ShowAlert", "Мое личное сообщение");<br>&nbsp;&nbsp;}<br>}</a>Как вы, наверное, успели догадаться, первый аргумент это название функций в индексе, а второе то, что мы передаем.<br><br>Теперь делаем билд и открываем index.html. В теге script добавляем функцию с названием ShowAlert и параметр.<a class="code" style="display: block">function ShowAlert(id) {<br>&nbsp;&nbsp;alert(id);<br>}</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_nine.jpg" loading="lazy" class="lazyload"></a></div>Открываем игру в браузере и видим alert с нашим переданным сообщением.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy.jpg" loading="lazy" class="lazyload"></a></div>Чтобы передать какой-нибудь int, достаточно в скрипте в Unity убрать кавычки и написать число.<a class="code" style="display: block">using UnityEngine;<br><br>public class FromUnityToIndex : MonoBehaviour {<br>&nbsp;&nbsp;void Start() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Application.ExternalCall("ShowAlert", 245);<br>&nbsp;&nbsp;}<br>}</a><b><a id="100_and_1_problem_of_unity_in_webgl/send_message_from_index_to_unity"><h3>2.35. Передача данных из index.html в Unity</h3></a></b>В этом нам поможет <a href="https://docs.unity3d.com/Manual/webgl-interactingwithbrowserscripting.html" target="_blank">myGameInstance.SendMessage</a>. Чтобы его подключить, достаточно написать две строки кода в index.html.<br><br>Сперва создаем переменную в начале тега script.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_one.jpg" loading="lazy" class="lazyload"></a></div>Затем, после <a class="code">then((unityInstance)</a> инициализируем:<a class="code" style="display: block">myGameInstance = unityInstance;</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_two.jpg" loading="lazy" class="lazyload"></a></div>Давайте передадим какие-либо данные из индекса в игру. Для начала создадим скрипт и назовем его AT<div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_nine.jpg" loading="lazy" class="lazyload"></a></div>После этого создаем пустой объект на сцене. Точно так же называем его AT и вешаем на него скрипт сделанный ранее. Если у вас несколько сцен, проделайте тоже самое в каждой из них.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty.jpg" loading="lazy" class="lazyload"></a></div>Наконец, отредактируем скрипт:<a class="code" style="display: block;">using UnityEngine;<br><br>public class AT : MonoBehaviour {<br>&nbsp;&nbsp;public void CallMe(string id) {<br>&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log(id);<br>&nbsp;&nbsp;}<br>}</a>Теперь делаем билд и редактируем index.html. Добавляем следующую строку:<a class="code" style="display: block;">if(myGameInstance != null) {<br>&nbsp;&nbsp;myGameInstance.SendMessage("AT", "CallMe", "Мое сообщение");<br>}</a>То есть, "AT" — это название объекта на сцене, "CallMe" — функция в скрипте, а "Мое сообщение" — параметр.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_three.jpg" loading="lazy" class="lazyload"></a></div>Открыв игру в браузере, мы можем заметить то самое сообщение в консоли браузера.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/seventy_four.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/video_issue"><h3>2.36. Почему не работает видео в браузере?</h3></a></b>Собрали небольшой список ссылок, которые, возможно, вам помогут:<tagname style="margin-left: 2%; display: block;">• Плейлист на YouTube, целиком и полностью посвященный воспроизведению видео в браузере — <a href="https://youtube.com/playlist?list=PLrqwM2iFaguhxCwnTX4wqU1ga8-6Y6-mq&si=ti1qOtIkleFrTB8i" target="_blank">Playing Videos In Unity WebGL</a>.<br>• <a href="https://github.com/search?q=unity%20webgl%20video&type=repositories" target="_blank">Результаты</a> по поиску на GitHub.</tagname><br>Так же делимся небольшим лайфхаком. Если видео длится пару секунд, попросту разделите его на отдельные кадры и воспроизводите через анимацию.<b><a id="100_and_1_problem_of_unity_in_webgl/customize_loading_screen"><h3>2.37. Как изменить загрузочный экран в браузере?</h3></a></b>Советуем воспользоваться <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates</a>. Вам не придется лезть в index.html. Достаточно следовать документаций и вы с легкостью сможете заменить лого, загрузочную полосу и фон.<b><a id="100_and_1_problem_of_unity_in_webgl/game_window_transparent"><h3>2.38. Можно ли сделать окно с игрой прозрачным?</h3></a></b>Информация была взята с <a href="https://forum.unity.com/threads/webgl-transparent-background.284699/#post-1880667" target="_blank">официального форума по Unity</a>.<br><br>Если вы хотите добиться примерно такого.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_five.jpg" loading="lazy" class="lazyload"></a></div>Тогда выставьте на основной камере Clear Flags на Solid Color. После в Background укажите прозрачность на ноль.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_four.jpg" loading="lazy" class="lazyload"></a></div>Затем импортируйте следующий плагин в папку Assets: <a href="./Files/Articles/advanced_templates/TransparentWebGL.unitypackage" download>TransparentWebGL.unitypackage</a>. Сделайте билд и проверьте результат.<b><a id="100_and_1_problem_of_unity_in_webgl/get_the_global_time"><h3>2.39. Как получить глобальное время?</h3></a></b>Зачастую обращения к сторонним хостам блокируются. К примеру, на Яндекс.Играх необходимо сначала их одобрить. Сделать это можно в черновике в настройках. Нужно будет будет указать причину использования и сам хост, вместе с этим, советуем загрузить уже играбельный билд вашей игры, иначе сделку не одобрят.<br><br>Но можно ли обойтись без всего этого? Да, в таком случае взгляните на <a href="https://www.linkedin.com/posts/malov-pavel_rewardtimer-activity-7151289286359736320-nKsO/" target="_blank">решение от пользователя Malove</a>. Сайт работает только с помощью впн. Пример использования доступен <a href="https://yandex.ru/games/app/262901?draft=true&lang=ru" target="_blank">здесь</a>.<b><a id="100_and_1_problem_of_unity_in_webgl/yandex_games"><h3>3. Яндекс Игры — SDK, реклама и многое другое</h3></a></b>Если вы решили начать свой путь именно с этой площадки, то ваш выбор пал не зря. Мы покажем, как зарегистрироваться, создать черновик, запустить игру, а главное — подключить SDK и реализовать показ рекламы.<br><br>Стоит отметить и <a href="https://youtube.com/playlist?list=PLxAJaawE-vksJlTcZKibYEmtL4dUqbrSa&si=Z3NNjbYARY8iRnvp" target="_blank">официальный курс Яндекс Игр</a> на YouTube. Все тоже самое, что и здесь, только в разы больше и в видеоформате.<b><a id="100_and_1_problem_of_unity_in_webgl/yandex_games_registration"><h3>3.1. Регистрация в Яндекс Консоли</h3></a></b>Сперва переходим на <a href="https://yandex.ru/dev/games/" target="_blank">Яндекс Консоль</a> и нажимаем на Консоль Разработчика Яндекс.Игр.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_five.jpg" loading="lazy" class="lazyload"></a></div>Нас перекидывает в окно входа. Если у вас уже есть аккаунт, совершите вход. Если же нет, нажмите Создать ID.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_six.jpg" loading="lazy" class="lazyload"></a></div>После всех махинаций, нам предложат придумать имя разработчика.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_seven.jpg" loading="lazy" class="lazyload"></a></div>Выбрав себе имя, вы успешно завершите регистрацию.<b><a id="100_and_1_problem_of_unity_in_webgl/yandex_games_game_loading"><h3>3.2. Загрузка игры</h3></a></b>Жмем Добавить приложение.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_eight.jpg" loading="lazy" class="lazyload"></a></div>По началу заполнять названия, описания и грузить скриншоты не нужно. Но важно указать три важных параметра, без которых игра не запустится.<br><br>Например, если вы уже загрузили архив с игрой, то по открытию черновика могли увидеть такую ошибку.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/fifty_nine.jpg" loading="lazy" class="lazyload"></a></div>Все из-за того, что вы либо открыли игру слишком рано, то есть она попросту не успела освоиться на серверах Яндекса. Либо пропустили три важных параметра.<br><br>А именно: поддерживаемые языки, платформы и ориентация.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty.jpg" loading="lazy" class="lazyload"></a></div>Чтобы загрузить игру, нажмите Выбрать файл. Только имейте ввиду, что папка с игрой должна быть архивирована в zip формате.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_one.jpg" loading="lazy" class="lazyload"></a></div>Спустя 3-5 минут, вы сможете открыть игру нажав на Открыть черновик. Если загрузка не двигается, <a href="#100_and_1_problem_of_unity_in_webgl/the_game_is_not_loading_or_an_error_occurred_in_the_browser">откройте консоль браузера и пройдитесь по возможным проблемам</a>.<b><a id="100_and_1_problem_of_unity_in_webgl/yandex_games_connect_sdk"><h3>3.3. Подключение SDK</h3></a></b>Для этого нам необходимо добавить несколько строк кода в index.html. Но обратите внимание, если вы пользуетесь плагинами для быстрой интеграций SDK Яндекс.Игр, такими, как PluginYG, Instant Games Bridge и GamePush, то прописывать подключение не нужно.<br><br>Если вы пользуетесь <a href="https://roundedbox.ru/#advanced_templates" target="_blank">Advanced Templates</a>, то подключить SDK можно следуя документаций. То есть лезть в index.html не придется.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_seven.jpg" loading="lazy" class="lazyload"></a></div>Но если вы не пользуетесь плагинами и шаблонами, то открываем index.html. В самом вверху подключаем:<br><a class="code" style="display: block">&lt;!-- Yandex Games SDK --&gt;<br>&lt;script src="https://yandex.ru/games/sdk/v2"&gt;&lt;/script&gt;</a><br>Чуть ниже после тега script инициализируем:<br><a class="code" style="display: block">// Инициализация<br>YaGames<br>.init()<br>.then(ysdk => {<br>&nbsp;&nbsp;console.log("Yandex SDK initialized");<br>&nbsp;&nbsp;window.ysdk = ysdk;<br>});</a><br>Можно так же вызывать рекламу при загрузке страницы, для этого замените или добавьте строку вызова в момент инициализаций:<br><a class="code" style="display: block">// Инициализация<br>YaGames<br>.init()<br>.then(ysdk => {<br>&nbsp;&nbsp;console.log("Yandex SDK initialized");<br>&nbsp;&nbsp;window.ysdk = ysdk;<br>&nbsp;&nbsp;ysdk.adv.showFullscreenAdv(); // Вызываем рекламу при загрузке страницы<br>});</a><div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_two.jpg" loading="lazy" class="lazyload"></a></div><b><a id="100_and_1_problem_of_unity_in_webgl/yandex_games_game_loading_after_sdk_initialization"><h3>3.4. Загрузка игры после инициализаций SDK</h3></a></b>Обязательно <a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_connect_sdk">встройте SDK Яндекс Игр</a>. Вдобавок, если вы пользуетесь плагинами для быстрой интеграций SDK Яндекс.Игр, такими, как PluginYG, Instant Games Bridge и GamePush, то этот пункт вам ни к чему.<br><br>Допустим, что вам нужно грузить игру только после того, как инициализируется SDK Яндекс Игр. Для этого достаточно отредактировать index.html.<br><br>Индекс может отличаться от используемых вами шаблонов, а потому покажем сразу на нескольких примерах. Но суть здесь одна, находим место загрузки файлов игры и оборачиваем инициализацией SDK.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_four.jpg" loading="lazy" class="lazyload"></a></div>Скопировать код:<br><a class="code" style="display: block">YaGames.init().then(ysdk => {<br>&nbsp;&nbsp;// Загрузка файлов игры<br>}).catch((e) => {<br>&nbsp;&nbsp;console.error("СДК не смогла инициализоваться, перезагружаем игру");<br>&nbsp;&nbsp;unityLoader.onload();<br>});</a><br>Еще один пример.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/sixty_five.jpg" loading="lazy" class="lazyload"></a></div>Скопировать код:<br><a class="code" style="display: block">YaGames.init().then(ysdk => {<br>&nbsp;&nbsp;// Загрузка файлов игры<br>}).catch((e) => {<br>&nbsp;&nbsp;console.error("СДК не смогла инициализоваться, перезагружаем игру");<br>&nbsp;&nbsp;script.onload();<br>});</a><b><a id="100_and_1_problem_of_unity_in_webgl/yandex_games_ads"><h3>3.5. Вызов рекламы и коллбэки</h3></a></b>Обязательно <a href="#100_and_1_problem_of_unity_in_webgl/yandex_games_connect_sdk">встройте SDK Яндекс Игр</a> и <a href="#100_and_1_problem_of_unity_in_webgl/send_message_from_index_to_unity">добавьте myGameInstance</a>.<br><br>Для начала скачайте следующий ассет: <a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/RBAds.unitypackage" download>RBAds.unitypackage</a>. Как только вы импортируете его в проект, у вас появится папка RBAds, а внутри скрипт, префаб и файл с расширением jslib.<br><br>Префаб RBAds вешаете на каждую сцену в игре. После этого можете отредактировать скрипт RBAds.cs, как сами того пожелаете. Например, можете добавить остановку игры при открытий рекламы.<br><br>Если вам нужно в другом скрипте вызывать рекламу, то это можно сделать примерно таким образом:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class AnotherScript : MonoBehaviour {<br>&nbsp;&nbsp;private void Update() {<br>&nbsp;&nbsp;&nbsp;&nbsp;// Вызываем полноэкранную рекламу на клавишу F<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetKeyDown(KeyCode.F)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RBAds.ShowAdv();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;// Вызываем ревард рекламу на клавишу R<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetKeyDown(KeyCode.R)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RBAds.ShowReward();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a>Ни в коем случае не вызывайте рекламу во время воспроизведения другой в это время. А так же не забывайте про то, что на Яндекс Играх вызывать рекламу можно только при определенных условиях.', 0);
        } else if(action == 3.2) {
            if(window.location.hash.includes("/")) {
                document.addEventListener("DOMContentLoaded", () => {
                    const element = document.getElementById(window.location.hash.replace(/#/gi, ''));
                    element.scrollIntoView();
                });
            } else {
                window.location.href = "#advanced_templates";
                document.addEventListener("DOMContentLoaded", () => {
                    window.scrollTo(0, 0);
                });
                window.scrollTo(0, 0);
            }

            createPost("white", "black", 750, '<a style="font-size: 150%;"><strong>Advanced Templates - расширенные шаблоны для Unity WebGL</a></strong><br>Позволяют зафиксировать экран с игрой в любом разрешений, исправляют большинство багов, дают возможность кастомизировать загрузочный экран и многое другое.<div class="imgHolder"><a href="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/100_and_1_problem_of_unity_in_webgl/twenty_four.jpg" loading="lazy" class="lazyload"></a></div>Содержание:<br><a href="#advanced_templates/about">0. Что это такое и для чего нужно?</a><br><a href="#advanced_templates/download">1. Скачать</a><br><a href="#advanced_templates/documentation">2. Документация</a><br><a href="#advanced_templates/how_to_install_correctly">3. Как правильно установить?</a><br><a href="#advanced_templates/i_have_a_problem">4. У меня возникла проблема.</a><br><a href="#advanced_templates/connect_plugin">5. Если я использую сторонний плагин, что мне надо делать?</a><br><a href="#advanced_templates/choose_loading_type">6. Можно ли изменить загрузочную полосу?</a><br><a href="#advanced_templates/lock_aspect_ratio">7. Как зафиксировать экран в разрешений 16/9, 9/16 и так далее?</a><br><a href="#advanced_templates/customize_logo">8. Как скрыть лого или заменить ее?</a><br><a href="#advanced_templates/customize_bars_background">9. Как перекрасить полосы по бокам или повесить картинку?</a><br><a href="#advanced_templates/customize_loading_screen_background">10. Как перекрасить фон на загрузочном экране или повесить картинку?</a><br><a href="#advanced_templates/configure_shadows_around_canvas">11. Можно ли добавить тени или обводку вокруг экрана с игрой во время фиксаций?</a><br><a href="#advanced_templates/disable_console_messages">12. Можно ли отключить отладочные, предупреждающие и ошибочные сообщения в консоли браузера?</a><br><a href="#advanced_templates/custom_events">13. Можно ли добавить собственный код в index.html?</a><br><a href="#advanced_templates/custom_events_yandex_sdk">13.1. Как подключить SDK Яндекс.Игр?</a><br><a href="#advanced_templates/custom_events_focus">13.2. Как узнать, находится ли игра в фокусе или нет в самом Unity?</a><br><a href="#advanced_templates/custom_events_orientation">13.3. Как узнать ориентацию устройства в Unity?</a><br><a href="#advanced_templates/custom_events_customize_bars_background_from_unity">13.4. Как менять цвет полос из движка?</a><br><a href="#advanced_templates/game_window_transparent">14. Можно ли сделать окно с игрой прозрачным?</a><br><a href="#advanced_templates/reducing_build_size_after_adding_an_asset">15. Можно ли уменьшить вес билда после добавления ассета?</a><b><a id="advanced_templates/about"><h3>0. Что это такое и для чего нужно?</h3></a></b>Шаблоны отвечают за отображение игры в браузере. Вместе с этим, настраивают загрузочный экран, а также позволяют взаимодействовать браузеру с движком. У каждого известного плагина под WebGL свой собственный шаблон, а вместе с ним и функционал. А потому мы с гордостью делимся Advanced Templates - едиными шаблонами с большой функциональностью.<br><br><b>Возможности:</b><br><tagname style="margin-left: 2%; display: block;">• Замена или скрытие лого во время загрузочного экрана.<br>• Смена фона загрузочного экрана.<br>• Выбор нескольких вариантов загрузочной полосы.<br>• Фиксация экрана с игрой в любом надобном разрешений, будь то 9/16 или 16/9. Можно также включать ее, только когда окно браузера больше или меньше определенного разрешения.<br>• Открытие игры на весь экран.<br>• Возможность узнать ориентацию устройства.<br>• Узнать, находится ли игра в фокусе.<br>• Можно добавить собственный код в HTML, CSS и JS без надобности лезть в index.html.<br>• Скролл и лонгтап убраны по умолчанию. MyGameInstance также подключен изначально.</tagname><br><b>Поддержка плагинов:</b><br><tagname style="margin-left: 2%; display: block;">• <a href="https://ash-message-bf4.notion.site/PluginYG-d457b23eee604b7aa6076116aab647ed" target="_blank">PluginYG</a><br>• <a href="https://getbridge.org/" target="_blank">Instant Games Bridge</a><br>• <a href="https://gamepush.com/" target="_blank">GamePush</a><br>• <a href="https://glow-yogurt-701.notion.site/Unity-Audio-Plugin-3-0-a9b3103e77d14f56b39e1b35792e7f4a" target="_blank">Web Audio Plugin</tagname></a>Если вы не пользуетесь ни одним из них, шаблоны также будут работать.<a id="advanced_templates/download"><h3>1. Скачать</h3></a>Советуем сразу после импорта удалить неиспользуемые файлы в ассете, во избежание проблем с подтармаживанием движка и увеличением веса проекта. Подробнее написали в <a href="#advanced_templates/reducing_build_size_after_adding_an_asset">пятнадцатом пункте</a>.<br><br><b>Архив версий:</b><tagname style="margin-left: 2%; display: block;">• <a href="./Files/Articles/advanced_templates/AT2.1.1.unitypackage" download>Версия 2.1.1 (актуальная)</a><br>Добавлена поддержка Instant Games Bridge версий 1.13.0.<br>• <a href="./Files/Articles/advanced_templates/AT2.1.0.unitypackage" download>Версия 2.1.0</a><br>Добавлена поддержка GamePush версий 1.3.1 и PluginYG 1.6.2. Исправлен баг с тенями при использований Instant Games Bridge.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.9.unitypackage" download>Версия 2.0.9</a><br>Добавлена поддержка GamePush версий 1.3.0.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.8.unitypackage" download>Версия 2.0.8</a><br>Добавлена поддержка Instant Games Bridge версий 1.12.0.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.7.unitypackage" download>Версия 2.0.7</a><br>Добавлен виртуальный помощник, который будет помогать решать проблемы связанные с загрузкой игры. Появилась поддержка GamePush 1.2.4.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.6.unitypackage" download>Версия 2.0.6</a><br>Исправлен баг, когда со слабым интернетом выдавало ошибку и загрузка останавливась намертво, то есть игрокам необходимо было обновлять страницу. Теперь загрузка начинается заново автоматом, если падает ошибка.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.5.unitypackage" download>Версия 2.0.5</a><br>Исправлен баг, когда после многочисленных обновлений страницы экран с игрой появлялся не сразу. Чаще всего встречалось на Яндекс Играх.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.4.unitypackage" download>Версия 2.0.4</a><br>Появилась поддержка релизной версий PluginYG 1.6.1.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.3.unitypackage" download>Версия 2.0.3</a><br>Появилась поддержка Instant Games Bridge версий 1.11.0 и GamePush 1.2.3. Был исправлен баг, связанный с GamePush 1.1.0 и 1.2.1.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.2.unitypackage" download>Версия 2.0.2</a><br>Появилась поддержка альфа версий PluginYG 1.6.1.<br>• <a href="./Files/Articles/advanced_templates/AT2.0.1.unitypackage" download>Версия 2.0.1</a><br>Исправлены мелкие недоработки.</tagname><b><a id="advanced_templates/documentation"><h3>2. Документация</h3></a></b>Не разобрались или остались вопросы? Пишите в нашей группе в <a href="https://t.me/roundedbox" target="_blank">телеграме</a> или во <a href="https://vk.com/roundedbox" target="_blank">вконтакте</a>.<b><a id="advanced_templates/how_to_install_correctly"><h3>3. Как правильно установить?</h3></a></b>Как только мы скачали AdvancedTemplates.unitypackage, открываем наш проект в Unity и перетаскиваем файл в папку Assets.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/one.jpg" loading="lazy" class="lazyload"></a></div></img>Затем наводим мышку на File и выбираем Build Settings.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/two.jpg" loading="lazy" class="lazyload"></a></div>Далее жмем кнопку в левом нижнем углу Player Settings.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/three.jpg" loading="lazy" class="lazyload"></a></div>Разворачиваем Resolution and Presentation и выбираем шаблон AT.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/four.jpg" loading="lazy" class="lazyload"></a></div>Далее следует удалить неиспользуемые файлы в ассете, во избежание проблем с подтармаживанием движка и увеличением веса проекта. Подробнее написали в <a href="#advanced_templates/reducing_build_size_after_adding_an_asset">пятнадцатом пункте</a>.<b><a id="advanced_templates/i_have_a_problem"><h3>4. У меня возникла проблема</h3></a></b>Ниже мы рассмотрели ошибки, с которыми вы можете столкнуться. Если вы не нашли решения своей проблемы, может тогда она не связана с шаблонами? Попробуйте прочесть документацию используемого вами плагина или нашу статью <a href="https://roundedbox.ru/#100_and_1_problem_of_unity_in_webgl" target="_blank">«100 и 1 проблема Unity в WebGL»</a>.<br><br><b>Поле сразу стирается:</b> смените шаблон на любой другой и выберите обратно Advanced Templates.<br><b>Я включил фиксацию, но в Unity ничего не изменилось:</b> шаблоны работают только в билде, то есть в браузере.<br><b>Экран с игрой находится не по центру:</b> удалите папку WebGLTemplates и импортируйте заново AT.unitypackage.<br><b>Build completed with a result of Failed. Preprocessor error "ReferenceError: НАЗВАНИЕ is not defined" occured in file:</b> заполните все поля, к примеру, напишите везде единицу. Как только билд завершится успешно, уберите все единицы.<br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/five.jpg" loading="lazy" class="lazyload"></a></div><b>Канвас работает некорректно:</b> в Canvas Scaler укажите разрешение игры и поставьте Expand. Насчет последнего мы не до конца уверены, можете попробовать оставить Match Width and Height или Shrink.<br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/six.jpg" loading="lazy" class="lazyload"></a></div><b>Ошибок в консоли нет и загрузочная полоса не двигается:</b> убедитесь в том, что правильно заполнили поля. Особенно обратите внимание на поле <a href="#advanced_templates/connect_plugin">Connect Plugin</a>, пишите команды строго по документаций.<br><b>Размер проекта увеличился в разы:</b> удалите неиспользуемые файлы в ассете. Подробнее написали в <a href="#advanced_templates/reducing_build_size_after_adding_an_asset">пятнадцатом пункте</a>.<b><a id="advanced_templates/connect_plugin"><h3>5. Если я использую сторонний плагин, что мне надо делать?</h3></a></b>Для начала найдите поле Connect Plugin, обычно оно на самом первом месте.<br><br>Если вы пользуетесь PluginYG, напишите в этом поле "YG и вашу версию", то есть:<br><a class="code">YG1.4<br>YG1.5<br>YG1.5.1<br>YG1.5.2<br>YG1.6<br>YG1.6.1</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.0.2 или выше</tagname><a class="code"><br>YG1.6.2</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.1.0 или выше</tagname><div class="imgHolder"><a href="./Files/Articles/advanced_templates/seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/seven.jpg" loading="lazy" class="lazyload"></a></div>Если вы пользуетесь Instant Games Bridge, напишите в этом поле "IGB и вашу версию", то есть:<br><a class="code">IGB1.9.2<br>IGB1.10.1<br>IGB1.11.0</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.0.3 или выше</tagname><br><a class="code">IGB1.12.0</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.0.8 или выше</tagname><div class="imgHolder"><a href="./Files/Articles/advanced_templates/eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/eight.jpg" loading="lazy" class="lazyload"></a></div>Если вы пользуетесь GamePush, напишите в этом поле "GP и вашу версию", то есть:<br><a class="code">GP1.1.0<br>GP1.2.1<br>GP1.2.2<br>GP1.2.3</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.0.3 или выше</tagname><a class="code"><br>GP1.2.4</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.0.7 или выше</tagname><a class="code"><br>GP1.3.0</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.0.9 или выше</tagname><a class="code"><br>GP1.3.1</a><tagname style="pointer-events: none; user-select: none; -ms-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; opacity: 60%;"> *Требуется версия 2.1.0 или выше</tagname><div class="imgHolder"><a href="./Files/Articles/advanced_templates/nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/nine.jpg" loading="lazy" class="lazyload"></a></div>Если вы пользуетесь Web Audio Plugin, поле Connect Plugin вам не понадобится. Для начала копируем папку Web Audio Plugin, которая лежит по пути Assets/WebGLTemplates/WebAudio/Web Audio Plugin и перетаскиваем в папку шаблона.<br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/ten.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/ten.jpg" loading="lazy" class="lazyload"></a></div>Затем в поле Custom Event in HTML пишем следующее:<br><a class="code" style="display: block;">&lt;script type="text/javascript" src="./Web Audio Plugin/howler.min.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="./Web Audio Plugin/WebAudio.js"&gt;&lt;/script&gt;</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/eleven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/eleven.jpg" loading="lazy" class="lazyload"></a></div>Отлично! Вы успешно разобрались со сторонними плагинами.<b><a id="advanced_templates/choose_loading_type"><h3>6. Можно ли изменить загрузочную полосу?</h3></a></b>Найдите поле Choose Loading Type.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/twelve.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twelve.jpg" loading="lazy" class="lazyload"></a></div>Чтобы включить такую загрузочную полосу, напишите <a class="code">0</a>. Включена по умолчанию. То есть, если вы ничего не напишете в поле, будет выбран именно этот вариант.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirteen.jpg" loading="lazy" class="lazyload"></a></div>Чтобы включить такую загрузочную полосу, напишите <a class="code">1</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/fourteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/fourteen.jpg" loading="lazy" class="lazyload"></a></div>Чтобы включить такую загрузочную полосу, напишите <a class="code">2</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/fifteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/fifteen.jpg" loading="lazy" class="lazyload"></a></div>Чтобы включить такую загрузочную полосу, напишите <a class="code">3</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/sixteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/sixteen.jpg" loading="lazy" class="lazyload"></a></div>Чтобы включить такую загрузочную полосу, напишите <a class="code">4</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/seventeen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/seventeen.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/lock_aspect_ratio"><h3>7. Как зафиксировать экран в разрешений 16/9, 9/16 и так далее?</h3></a></b>Для начала укажем необходимое разрешение в Default Canvas Width и Default Canvas Height. Первая это ширина, вторая высота. Поддерживаются любые разрешения.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/eighteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/eighteen.jpg" loading="lazy" class="lazyload"></a></div>Дальше находим поле Lock Aspect Ratio.<br><br>— Чтобы включить фиксацию на телефонах, напишите <a class="code">mobile</a><br>— Чтобы включить фиксацию на компьютерах, напишите <a class="code">pc</a><br>— Чтобы включить фиксацию на обеих платформах, напишите <a class="code">all</a><br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/nineteen.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/nineteen.jpg" loading="lazy" class="lazyload"></a></div>Мы также можем указать способ определения устройства. По умолчанию используется второй вариант.<br><br>— Добавьте к команде <a class="code">touch</a>, чтобы определять платформу с помощью поддержки тача. Благодаря этому способу, iPad будет считаться как мобильное устройство, но ноутбуки и компьютеры с поддержкой тача тоже.<br>— Добавьте к команде <a class="code">navigator</a>, чтобы определять платформу с помощью userAgent. Благодаря этому способу, iPad будет считаться как компьютер. Схоже с определением SDK Яндекс.Игр.<br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty.jpg" loading="lazy" class="lazyload"></a></div>Если вы хотите указать разные разрешения в зависимости от устройства.<br><br>— Чтобы определять платформу с помощью поддержки тача, зафиксировать экран на телефоне в 16/9, а на компьютере в 9/16, напишите:<br><a class="code">if(isDeviceTouch){lock(canvas, 16/9);}else{lock(canvas, 9/16);}</a><br>— Чтобы определять платформу с помощью userAgent, зафиксировать экран на телефоне в 16/9, а на компьютере в 9/16, напишите:<br><a class="code">if(isDeviceNavigator){lock(canvas, 16/9);}else{lock(canvas, 9/16);}</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_one.jpg" loading="lazy" class="lazyload"></a></div>Мы также можем включать фиксацию только когда окно браузера меньше или больше определенного разрешения.<br><br>— Чтобы фиксация включалась только когда ширина и высота окна браузера меньше 9/16, напишите:<br><a class="code">if(window.innerWidth/window.innerHeight<9/16){if(isDeviceNavigator){lock(canvas, 16/9);}else{lock(canvas, 9/16);}}</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_two.jpg" loading="lazy" class="lazyload"></a></div>— Если вы хотите менять разрешение экрана в зависимости от ориентаций, тогда напишите этот код:<a class="code" style="display: block;">if(isDeviceNavigator) { if(window.innerWidth < window.innerHeight) { lock(canvas, 9/16); } else { lock(canvas, 16/9); }} else { lock(canvas, 16/9); }</a><br>То есть, если это телефон и ориентация портретная, фиксируем экран в разрешений 9/16, если ориентация альбомная, фиксируем в 16/9. Если это ПК, то фиксируем в 16/9.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_six.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/customize_logo"><h3>8. Как скрыть лого или заменить ее?</h3></a></b>Найдите поле Customize Logo.<br><br>— Чтобы скрыть лого, напишите <a class="code">display = "none"</a><br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_three.jpg" loading="lazy" class="lazyload"></a></div>- Если вы хотите использовать свою картинку или поставить гифку, импортируйте файл в папку шаблона, мы, например, импортировали apple.png..<div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_four.jpg" loading="lazy" class="lazyload"></a></div>Затем, в поле Customize Logo пишем команду:<br><a class="code">backgroundImage = "url(&#39;названиефайла.формат&#39;)"</a><br><br>Так как для тестов мы импортировали apple.png, соответственно, именно его и пишем в кавычках:<br><a class="code">backgroundImage = "url(&#39;apple.png&#39;)"</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_five.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/customize_bars_background"><h3>9. Как перекрасить полосы по бокам или повесить картинку?</h3></a></b>Найдите поле Customize Bars Background.<br><br>- Чтобы поставить сплошной цвет (HEX-коды, RGB, RGBA и прочее тоже поддерживаются), напишите <a class="code">backgroundColor = "#FFFFFF"</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_six.jpg" loading="lazy" class="lazyload"></a></div>- Чтобы поставить градиент, напишите <a class="code">backgroundImage = "linear-gradient(#2976fa, #6919c6)"</a><br>- Если вы хотите использовать свою картинку или поставить гифку, импортируйте файл в папку шаблона, мы, например, импортировали apple.png.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_four.jpg" loading="lazy" class="lazyload"></a></div>Затем, в поле Customize Bars Background пишем команду:<br><a class="code">backgroundImage = "url(&#39;названиефайла.формат&#39;)"</a><br><br>Так как для тестов мы импортировали apple.png, соответственно, именно его и пишем в кавычках:<br><a class="code">backgroundImage = "url(&#39;apple.png&#39;)"</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_eight.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/customize_loading_screen_background"><h3>10. Как перекрасить фон на загрузочном экране или повесить картинку?</h3></a></b>Найдите поле Customize Loading Screen Background.<br><br>- Чтобы поставить сплошной цвет (HEX-коды, RGB, RGBA и прочее тоже поддерживаются), напишите <a class="code">backgroundColor = "#FFFFFF"</a><br>- Чтобы поставить градиент, напишите <a class="code">backgroundImage = "linear-gradient(#2976fa, #6919c6)"</a><br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_nine.jpg" loading="lazy" class="lazyload"></a></div>- Если вы хотите использовать свою картинку или поставить гифку, импортируйте файл в папку шаблона, мы, например, импортировали apple.png.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/twenty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/twenty_four.jpg" loading="lazy" class="lazyload"></a></div>Затем, в поле Customize Loading Screen Background пишем команду:<a class="code">backgroundImage = "url(&#39;названиефайла.формат&#39;)"</a><br><br>Так как для тестов мы импортировали apple.png, соответственно именно его и пишем в кавычках:<br><a class="code">backgroundImage = "url(&#39;apple.png&#39;)"</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_one.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/configure_shadows_around_canvas"><h3>11. Можно ли добавить тени или обводку вокруг экрана с игрой во время фиксаций?</h3></a></b>Найдите поле Configure Shadows Around Canvas.<br><br>- Чтобы включить простые тени, напишите <a class="code">low</a><br>- Чтобы включить средние тени, напишите <a class="code">medium</a><br>- Чтобы включить тяжелые тени, напишите <a class="code">high</a><br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_two.jpg" loading="lazy" class="lazyload"></a></div>Если вы хотите по своему настроить, воспользуйтесь этим <a href="https://active-vision.ru/icon/box-shadow/" target="_blank">сайтом</a>. И обратите внимание, что копировать нужно только нижний код, без box-shadow, как это показано на скриншоте. Код на картинке: <a class="code">0px 5px 10px 10px rgba(34, 60, 80, 0.2);</a><br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_three.jpg" loading="lazy" class="lazyload"></a></div>В самом Unity это будет выглядеть таким образом:<br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_four.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/disable_console_messages"><h3>12. Можно ли отключить отладочные, предупреждающие и ошибочные сообщения в консоли браузера?</h3></a></b>Вы можете скрыть отладочные белые сообщения в консоли браузера, чтобы сконцентрироваться на ошибках. Слева до, справа после.<br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_five.jpg" loading="lazy" class="lazyload"></a></div>Для начала найдите поле Disable Console Messages.<br><br>- Чтобы отключить отладочные белые сообщения, напишите <a class="code">log</a><br>- Чтобы отключить предупреждающие желтые сообщения, напишите <a class="code">warn</a><br>- Чтобы отключить ошибочные красные сообщения, напишите <a class="code">error</a><br>- Чтобы отключить все виды сообщений, напишите <a class="code">all</a><br><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_six.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_six.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/custom_events"><h3>13. Можно ли добавить собственный код в index.html?</h3></a></b>Для этого в шаблоне есть кастомные эвенты, не придется даже открывать index.html.<br><br>- Чтобы добавить собственный код в HTML разделе, воспользуйтесь полем Custom Event in HTML.<br>- Чтобы добавить собственный код в CSS разделе, воспользуйтесь полем Custom Event in CSS.<br>- Чтобы добавить собственный код в JavaScript разделе, воспользуйтесь полем Custom Event in JS.<b><a id="advanced_templates/custom_events_yandex_sdk"><h3>13.1. Как подключить SDK Яндекс.Игр?</h3></a></b>Если вы пользуетесь плагинами для быстрой интеграций SDK Яндекс.Игр, такими, как PluginYG, Instant Games Bridge и GamePush, то прописывать подключение не нужно.<br><br>Для этого напишите в Custom Event in HTML следующую команду:<br><a class="code" style="display: block;">&ltscript src="https://yandex.ru/games/sdk/v2"&gt&lt/script&gt</a><br>Затем, добавьте этот код в Custom Event in JS:<br><a class="code" style="display: block;">YaGames.init().then(ysdk=>{console.log("Yandex SDK initialized");window.ysdk=ysdk});</a><br>Вы так же можете вызывать рекламу при загрузке страницы, для этого замените код в поле Custom Event in JS:<br><a class="code" style="display: block;">YaGames.init().then(ysdk=>{console.log("Yandex SDK initialized");window.ysdk=ysdk;ysdk.adv.showFullscreenAdv();});</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_seven.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/custom_events_focus"><h3>13.2. Как узнать, находится ли игра в фокусе или нет в самом Unity?</h3></a></b>Для начала напишите в Custom Event in JS этот код:<br><a class="code" style="display: block;">ATinstanceEnable(function(){if(document.visibilityState==="visible"){window.ATinstance.SendMessage("AT","PageVisible")}else{window.ATinstance.SendMessage("AT","PageNotVisible")}document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"){window.ATinstance.SendMessage("AT","PageVisible")}else{window.ATinstance.SendMessage("AT","PageNotVisible")}})});</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_eight.jpg" loading="lazy" class="lazyload"></a></div>Затем создайте скрипт и назовите его AT<div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_nine.jpg" loading="lazy" class="lazyload"></a></div>После этого создайте пустой объект на сцене. Точно так же назовите его AT и повесьте на него скрипт сделанный ранее. Если у вас несколько сцен, проделайте тоже самое в каждой из них.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty.jpg" loading="lazy" class="lazyload"></a></div>Наконец, отредактируем скрипт:<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_one.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_one.jpg" loading="lazy" class="lazyload"></a></div>Скопировать скрипт:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class AT : MonoBehaviour {<br>&nbsp;&nbsp;public void PageVisible() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Игра в фокусе");<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;public void PageNotVisible() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Игра НЕ в фокусе");<br>&nbsp;&nbsp;}<br>}</a><b><a id="advanced_templates/custom_events_orientation"><h3>13.3. Как узнать ориентацию устройства в Unity?</h3></a></b>Для начала напишите в Custom Event in JS этот код:<br><a class="code" style="display: block;">ATinstanceEnable(function() { var nn;if(window.innerWidth < window.innerHeight) {window.ATinstance.SendMessage("AT", "OrientationPortrait");nn = false;} else {window.ATinstance.SendMessage("AT", "OrientationLandscape");nn = true;}window.addEventListener("resize", (event) => {if(window.innerWidth < window.innerHeight) {if(nn) {window.ATinstance.SendMessage("AT", "OrientationPortrait");nn = false;}} else {if(!nn) {window.ATinstance.SendMessage("AT", "OrientationLandscape");nn = true;}}});});</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_two.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_two.jpg" loading="lazy" class="lazyload"></a></div>Затем создайте скрипт и назовите его AT<div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_nine.jpg" loading="lazy" class="lazyload"></a></div>После этого создайте пустой объект на сцене. Точно так же назовите его AT и повесьте на него скрипт сделанный ранее. Если у вас несколько сцен, проделайте тоже самое в каждой из них.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty.jpg" loading="lazy" class="lazyload"></a></div>Наконец, отредактируем скрипт:<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_three.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_three.jpg" loading="lazy" class="lazyload"></a></div>Скопировать скрипт:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class AT : MonoBehaviour {<br>&nbsp;&nbsp;public void OrientationPortrait() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Ориентация портретная");<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;public void OrientationLandscape() {<br>&nbsp;&nbsp;&nbsp;&nbsp;Debug.Log("Ориентация альбомная");<br>&nbsp;&nbsp;}<br>}</a><b><a id="advanced_templates/custom_events_customize_bars_background_from_unity"><h3>13.4. Как менять цвет полос из движка?</h3></a></b>Для начала напишите в Custom Event in JS этот код:<a class="code" style="display: block;">function SetColor(id) { document.body.style.background = "none"; document.body.style.backgroundColor = id; } function SetGradient(id) { document.body.style.background = "none"; document.body.style.backgroundImage = "linear-gradient(" + id + ")"; } function SetImage(id) { document.body.style.background = "none"; document.body.style.backgroundImage = "url(" + id + ")"; document.body.style.backgroundPositionX = "50%"; document.body.style.backgroundRepeat = "no-repeat"; document.body.style.backgroundSize = "cover"; document.body.style.backgroundAttachment = "fixed"; }</a><div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_seven.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_seven.jpg" loading="lazy" class="lazyload"></a></div>Затем создайте скрипт и назовите его AT<div class="imgHolder"><a href="./Files/Articles/advanced_templates/thirty_nine.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/thirty_nine.jpg" loading="lazy" class="lazyload"></a></div>После этого создайте пустой объект на сцене. Точно так же назовите его AT и повесьте на него скрипт сделанный ранее. Если у вас несколько сцен, проделайте тоже самое в каждой из них.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty.jpg" loading="lazy" class="lazyload"></a></div>Наконец, отредактируем скрипт:<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_eight.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_eight.jpg" loading="lazy" class="lazyload"></a></div>Скопировать скрипт:<br><a class="code" style="display: block;">using UnityEngine;<br><br>public class AT : MonoBehaviour {<br>&nbsp;&nbsp;void Update() {<br>&nbsp;&nbsp;&nbsp;&nbsp;// Перекрашиваем в красный цвет<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetKeyDown(KeyCode.F)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Application.ExternalCall("SetColor", "red");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;// Перекрашиваем в градиент<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetKeyDown(KeyCode.G)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Application.ExternalCall("SetGradient", "#2976fa, #6919c6");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;// Вешаем картинку<br>&nbsp;&nbsp;&nbsp;&nbsp;if(Input.GetKeyDown(KeyCode.H)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Application.ExternalCall("SetImage", "background.jpg");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}</a>Теперь, сделав билд и открыв игру в браузере, по нажатию F, полосы по бокам перекрасятся в красный, нажав G - в градиент, H - применится картина, находящаяся в папке шаблона.<b><a id="advanced_templates/game_window_transparent"><h3>14. Можно ли сделать окно с игрой прозрачным?</h3></a></b>Информация была взята с <a href="https://forum.unity.com/threads/webgl-transparent-background.284699/#post-1880667" target="_blank">официального форума по Unity</a>.<br><br>Для начала выставьте на основной камере Clear Flags на Solid Color. После в Background укажите прозрачность на ноль.<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_four.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_four.jpg" loading="lazy" class="lazyload"></a></div>Теперь импортируйте следующий плагин в папку Assets: <a href="./Files/Articles/advanced_templates/TransparentWebGL.unitypackage" download>TransparentWebGL.unitypackage</a><br><br>Готово! В браузере должна получиться примерно такая картина:<div class="imgHolder"><a href="./Files/Articles/advanced_templates/forty_five.jpg" target="_blank"><img  src="./Files/lazy.jpg" data-src="./Files/Articles/advanced_templates/forty_five.jpg" loading="lazy" class="lazyload"></a></div><b><a id="advanced_templates/reducing_build_size_after_adding_an_asset"><h3>15. Можно ли уменьшить вес билда после добавления ассета?</h3></a></b>Шаблоны содержат в себе целых три плагина и несколько их версий, а потому и прибавляют с каждым разом в весе. Однако, не стоит переживать по этому поводу. Если вы пользуетесь, к примеру, PluginYG, у вас и у игрока никогда не загрузятся файлы предназначенные для Instant Games Bridge и GamePush. Соответственно, время загрузки не изменится.<br><br>Но если вас все равно беспокоит нарастившийся вес, следуйте инструкций:<br><tagname style="margin-left: 2%; display: block;">• Если вы пользуетесь PluginYG, смело удаляйте папку Files.<br>• Если вы пользуетесь GamePush, зайдите в Files и удалите все папки, кроме вашей версий GP.<br>• Если вы пользуетесь Instant Games Bridge, зайдите в Files и удалите все папки, кроме вашей версий IGB.<br>• Если вы нигде не задействуете background.jpg или logo.png, то удалите их.</tagname>', 0);
        }

        checkLazyLoad();
    }

    function checkURL() {
        if(window.location.href.includes("#home")) {
            make(0);
        } else if(window.location.href.includes("#games")) {
            make(1);
        } else if(window.location.href.includes("#videos")) {
            make(2);
        } else if(window.location.href.includes("#articles")) {
            make(3);
        } else if(window.location.href.includes("#100_and_1_problem_of_unity_in_webgl")) {
            make(3.1);
        } else if(window.location.href.includes("#advanced_templates")) {
            make(3.2);
        } else if(window.location.href.includes("#create_one_page_website_and_publish_on_internet")) {
            make(3.3);
        } else {
            make(0);
        }
    }

    checkURL();

    // Функция апдейта, которая при загрузке страницы и при изменений размеров окна браузера вызывается
    function Update() {
        if(window.innerWidth <= 1315 || window.innerHeight <= 365) {
            document.querySelector('.view').style.paddingBottom = document.querySelector('.bottombar').offsetHeight + 'px';
        } else {
            document.querySelector('.view').style.paddingBottom = '0';
        }
    }

    Update(); // Вызываем Update при загрузке страницы
    window.addEventListener("resize", Update); // Вызываем Update при изменений размеров окна браузера      
</script>
</body>
</html>